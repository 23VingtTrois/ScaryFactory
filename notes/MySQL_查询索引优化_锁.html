<html>
<head>
  <title>MySQL_查询索引优化_锁</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601568 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="415"/>
<h1>MySQL_查询索引优化_锁</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><div style="line-height: 160%; box-sizing: content-box;"><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">MySQL的配置文件
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">MyISAM和InnoDB的区别
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">SQL执行顺序
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">索引优化
</a><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">什么是索引
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">执行计划
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">索引优化
</a></li></ul></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">查询优化
</a><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">小表驱动大表
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">SQL排序
</a></li></ul><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">慢查询日志
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">mysqldumpslow日志分析工具
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">Show Profile
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">全局查询日志
</a></li></ul></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">MySQL锁机制
</a><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">锁的分类
</a><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">表锁
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">行锁
</a></li></ul></li></ul></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">主从复制
</a><ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;"><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">主机修改配置文件my.ini
</a></li><li style="line-height: 160%; box-sizing: content-box; position: relative;"><a style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">在主机上建立账户并授权给从机
</a></li></ul></li></ul></div><h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">MySQL的配置文件</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">二进制日志<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">log-bin</strong>用于记录数据库的写行为，用于主从复制</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">错误日志<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">log-error</strong>默认关闭，用于记录严重的错误和警告信息，每次启动和关闭的详细信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查询日志<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">log</strong>默认关闭，记录查询的SQL语句，开启会降低MySQL的整体性能</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">数据文件
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">frm文件：存放表结构</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">myd文件：存放表数据</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">myi文件：存放表索引</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">配置文件<br/>
windows：<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">my.ini</strong><br/>
Linux：<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">my.cnf</strong></li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">MyISAM和InnoDB的区别</h3>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">MyISAM不支持事务处理、外键等高级数据库功能，而InnoDB支持</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">MyISAM强调的是性能，其执行速度比InnoDB更快</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">MyISAM只有表锁，InnoDB支持行锁(基于索引的行锁)</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">InnoDB不保存表的具体行数，执行select count(*) from table时需要全表扫描。而MyISAM用一个变量保存了整个表的行数，执行上述语句时只需要检索出这个变量就行</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">综上，MyISAM引擎适合读多写少的情况，而大量的写操作则需要用InnoDB来保证性能和数据的准确性。而InnoDB也是MySQL5.5之后的默认引擎</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">SQL执行顺序</h3>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">DISTINCT</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> tbleName1
[<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">INNER</span>|<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LEFT</span>|<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">RIGHT</span>] <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">JOIN</span> tableName2
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ON</span>
    [连接条件]
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">WHERE</span>
    [筛选条件]
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GROUP</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">BY</span>
    [分组条件]
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">HAVING</span>
    [分组后筛选条件]
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ORDER</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">BY</span> [排序字段] [<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ASC</span>|<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">DESC</span>]
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LIMIT</span>
    [起始索引数，每页条目数]
    [<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">size</span>*(page<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-1</span>)，<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">size</span>]
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">MySQL执行SQL的顺序从From开始，以下是执行的顺序流程</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">FROM</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">WHERE</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">GROUP BY</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">HAVING</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">SELECT</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">DISTINCT</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">ORDER BY</strong>-&gt;<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">LIMIT</strong></p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">FROM tbleName1[INNER|LEFT|RIGHT] JOIN tableName2将两个表中的数据产生笛卡尔积，生成临时表V1。再将ON中连接条件应用到V1的每一行，再生成一个临时表V2。这时再判断是LEFT JOIN还是RIGHT JOIN，然后把刚才相应的表中被过滤的行添加到V2中生成临时表V3。如果FROM中关联了两个表以上则第三表和V3重复上面的过程</li>
<li style="line-height: 160%; box-sizing: content-box;">WHERE对临时表V3进行过滤产生中间表V4。应用where筛选器，对上一步生产的虚拟表引用WHERE筛选器，生成虚拟表V4，ON和WHERE最大区别在于，如果在ON应用逻辑表达式那么在第三步OUTER JOIN中还可以把移除的行再次添加回来，而WHERE的移除是不可恢复的</li>
<li style="line-height: 160%; box-sizing: content-box;">GROUP BY 对中间表V4进行分组，产生虚拟表V5。GROUP BY子句将中的唯一的值组合成为一组，得到虚拟表V5。如果使用了GROUP BY，那么后面的所有步骤都只能得到的V5的列或者是聚合函数（COUNT、SUM、MAX等）。原因在于最终的结果集中只为每个组包含一行</li>
<li style="line-height: 160%; box-sizing: content-box;">HAVING对分组后的记录进行筛选，和WHERE的作用是一样的产生虚拟表V6</li>
<li style="line-height: 160%; box-sizing: content-box;">SELECT对虚拟表V6进行列筛选，选择出要表示的列，产生虚拟表V7</li>
<li style="line-height: 160%; box-sizing: content-box;">DISTINCT对中间表V7进行去重，产生中间表V8</li>
<li style="line-height: 160%; box-sizing: content-box;">ORDER BY对V8中的数据进行排序，产生中间表V9。排序是很需要成本的，除非你必须要排序，否则最好不要指定排序</li>
<li style="line-height: 160%; box-sizing: content-box;">LIMIT对中间表V9进行分页，产生<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">最终结果</strong></li>
</ol>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">所有的查询语句都是从from开始执行的，在执行过程中，每个步骤都会为下一个步骤生成一个虚拟表，这个虚拟表将作为下一个执行步骤的输入。</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">索引优化</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">SQL慢是指执行时间长或等待时间长，原因是</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查询语句写的有问题</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">索引失效</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">关联查询太多</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">服务器参数配置不合理或者已达到性能瓶颈</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">什么是索引</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">排好序的、用于快速查找的数据结构</strong>。在数据之外，数据库还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用数据，这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。对于我们Java程序员来说，这种索引就是B TREE索引(多路搜索树)<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">索引的优点</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">提高查询的速度，提高数据库的效率，降低数据库的IO成本</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">通过索引对数据库进行排序，降低了排序和分组的成本，减少了CPU的消耗</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">索引的缺点</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">索引的本质也是一张表，保存了主键和索引字段，并指向实体表的字段。索引是用空间来换取时间，缩短查询的时间成本的同时，要牺牲磁盘空间成本来存储索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">索引会提高查询速度，但是会降低表的更新速度。索引创建之后，在对数据库表中的数据进行增、删、改等操作之后，相应的索引也需要进行维护</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">索引的种类</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">单值索引<br/>
一个索引只包含一个列，一个表可以有多个单值索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">复合索引<br/>
一个索引包含多个列</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">唯一索引<br/>
索引列的值唯一，但是允许有空值</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#创建索引</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#对于创建索引时如果是blob和text类型，必须指定length</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">CREATE</span> [<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">UNIQUE</span>] <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">INDEX</span> indexName <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ON</span> tableName(columnName1,columnName2)
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ALTER</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">TABLE</span> tableName <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ADD</span> [<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">UNIQUE</span>] <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">INDEX</span> [indexName] <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ON</span> (columnName)
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#删除索引</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">DROP</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">INDEX</span> indexName <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ON</span> tableName
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查看索引</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">INDEX</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> tableName
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">左连接建右表</strong><br/>
多表建立连接的时候，左连接将索引建在右表的主外键上，右连接将索引建立在左表的主外键上。因为左连接的时候左表的数据全部都有，而右表的数据需要筛选，也就是说主表是一定需要全表扫描的，而子表不需要，所以索引建在子表上</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">哪些情况要创建索引</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">主键自动创建唯一索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">频繁作为查询条件的字段应该创建索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查询中与其它表建立联系的字段，外键关系建立索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">高并发的情况下，偏向复合索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查询中排序的索引，排序字段若通过索引去访问将大大的提高排序速度</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查询中统计或分组的字段要创建索引</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">哪些情况不要创建索引</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">表中的记录太少</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">经常增删改的表</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">数据重复且平均分布的表字段</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">WHERE条件里面用不到的字段不创建索引</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">频繁更新的字段不适合创建索引，因为每次更新还需要维护索引，加重数据库的IO负担</li>
</ul>
</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">约定一般来说一张表不要建立超过5个索引</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">执行计划</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">使用<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">EXPLAIN</strong>来模拟优化器执行SQL查询语句，从而知道MySQL是如何处理你的SQL语句的，分析查询语句的性能瓶颈</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#使用方法 EXPLAIN + 目标SQL</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">EXPLAIN</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> * <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> human
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">id</strong><br/>
SELECT的查询序号，表示查询中执行的SELECT子句或者操作表的顺序。id如果相同的话，自上而下执行；id不同的话，id越大越优先执行</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">select type</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">simple<br/>
简单查询，不包含子查询或者关联查询</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">primary<br/>
查询中若包含子查询，主查询被标记为primary</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">subquery<br/>
SELECT或WHERE中包含了子查询，子查询会被标记为subquery</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">derived<br/>
在from列表中包含的子查询被标记为derived(衍生)，即查的表是其他查询生成的中间表，后面会有一个数字，那是id，可以看出是那一个表的衍生表</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">union<br/>
如果第二个select出现在union后面，则被标记为union，如果union包含在from子句的子查询中，外层的select被标记为derived</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">union select<br/>
从union的结果中获取结果的select</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">table</strong><br/>
显示这一行数据是关于那一个表的</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">type</strong><br/>
重要参数，主要根据这个来判断一条SQL的好坏</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">system<br/>
表中只有一行数据，基本上是系统变量</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">const<br/>
表只有一行匹配，并在查询开始时就被读取，因此被优化器视为常数。当主键或者唯一索引和一个常数比较时会出现</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">eq_ref<br/>
每次匹配时只会读取一行，当主键或者唯一非空索引(unique not null index)的全部或部分被使用时会出现</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">ref<br/>
每次匹配时会读取所有匹配行，当用到了非唯一索引或者唯一索引的一部分时会出现，等值匹配</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">range<br/>
根据索引选取一定范围内的行，范围匹配</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">index<br/>
从索引中获取所有的数据，不需要访问原表。(对于innodb引擎，索引中会有主键数据)或者根据索引的顺序进行全表扫描</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">all<br/>
全表扫描<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">[system&gt;&gt;eq_ref&gt;ref&gt;range&gt;index&gt;all]起码达到range级别，最好能达到ref</strong></li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">possible_keys</strong><br/>
可能用到的索引，一个或者多个，查询涉及到的字段只要存在索引就会被列出，但不一定会被使用</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">key</strong><br/>
实际使用的索引，不一定在possible_keys中存在，如果是null则没有使用索引</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">key_len</strong><br/>
表示使用的索引的长度，可以用来判断多列索引中的哪些部分被使用到了。在不损失精确性的情况下，越短越好</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">ref</strong><br/>
匹配时使用到的列或者常数，如果值是func，表示匹配时用到了由函数生成的值(+-、*/也算)。如果要看使用到了哪些函数，可以在explain语句执行后使用show warnings</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">rows</strong><br/>
检查的行数，Innodb引擎是个估计值</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Extra</strong><br/>
包含不适合在其它列中显示但十分重要的信息</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Using filesort<br/>
说明MySQL会对数据使用一个外部的索引排序，而不是按照表内索引的顺序进行读取。也就是说MySQL的排序没有用到索引，这种情况尽量进行优化</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Using temporary<br/>
使用了临时表来保存结果，常见于分组和排序，这种情况非常影响性能，是一定需要进行优化的</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Using index<br/>
表示使用了覆盖索引，避免访问了表的数据行。如果同时出现Using where，表明索引被用来执行索引键值的查找，如果没有则表明索引用来读取数据而非执行查找动作</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Using where<br/>
表明使用了where过滤</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Using join buffer<br/>
表名使用了连接缓存，如果多表关联join特别多的话需要把配置文件中的join buffer调大一点</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">impossible where<br/>
where子句的值总是false，获取不到任何行</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">select tables optimiezd away<br/>
在没有order by的情况下，基于索引优化min/max操作，或者对于MyISAM存储引擎优化count(*)，不必等到执行阶段再计算，查询执行计划生成阶段即完成优化</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">distinct<br/>
优化distinct操作，在找到第一匹配的元组之后立即停止找同样的值的操作</li>
</ul>
</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">索引优化</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">全值匹配</strong><br/>
即建立索引的字段，在查询语句中全部使用到，并且是等值，这是最理想的情况</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">最佳左前缀法则</strong><br/>
有的时候我们用不到索引的所有列，但是我们必须要遵循最佳左前缀法则：查询从最左前列开始，并且不跳过中间列，但是如果是等值匹配的情况，abcd和abdc甚至dcba是一样的，自动查询优化器会自动调整</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">不再索引字段上做任何操作</strong><br/>
函数，计算，自动或者手动的类型转换都会导致索引失效而转向全表扫描</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">范围条件右边的列无效</strong><br/>
索引可以形象理解为，一级一级递增缩小的范围，比如说A区B栋3楼302房，这是一个索引，如果我只说A区B栋，那么找到B栋的时候，后面你不知道是具体几楼，所以说范围检索后面的列索引无效。所以我们会把范围检索放在最后面</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">尽量使用覆盖索引</strong><br/>
只访问索引的查询(索引列和查询列一致)，减少select*</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用!=或者&lt;&gt;会导致索引失效变成全表扫描</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用is null ，is not null会导致索引失效</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用like关键字的时候前面通配符是%的时候(like('%a'))MySQL索引失效</strong><br/>
所以like后面的百分号尽量不要放在左边。非要放左边的话可以使用覆盖索引来解决这个问题，但查询字段不可以超过建立索引的字段</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">字符串不加单引号会导致索引失效</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用or连接时会导致索引失效</strong></li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">查询优化</h3>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">慢查询日志的开启并捕获慢SQL</li>
<li style="line-height: 160%; box-sizing: content-box;">explain慢SQL分析</li>
<li style="line-height: 160%; box-sizing: content-box;">show profile查询SQL在MySQL服务器里面的执行细节和生命周期情况</li>
<li style="line-height: 160%; box-sizing: content-box;">SQL数据服务器的参数调优</li>
</ol>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">小表驱动大表</strong></h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">IN由内而外，EXIST自外而内</strong><br/>
我们在Java中写两个嵌套的循环，循环次数是两个循环的乘积，所以内层循环和外层循环的顺序没有关系。但是在MySQL中，每执行一次循环就需要建立一次连接，所以要求的是外层循环次数要比内层循环次数要小，也就是我们常说的小表驱动大表，大表指的是数据多的表，查询相当于是遍历这个表，数据越多遍历次数越多</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> * <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> A <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">WHERE</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ID</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">IN</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">ID</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> B);
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这种情况会先去查询B表，再去查询A表，也就是说相当于先遍历B再遍历A，那么当B表的数据绝对小于A表的时候使用这种方式</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> * <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> A <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">EXISTS</span>( <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> existsFlag <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> B <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">WHERE</span> A.ID=B.ID)
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这种情况会先去查询A表，再去查询B，相当于先遍历A再去遍历B，当A表的数据绝对小于B表的时候使用这种方式<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">exists</strong>关键字是将主查询的数据放在子查询中进行验证，根据验证结果来决定主查询的数据是否保留。<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">exists只会返回一个boolean值所以select后面写什么没关系</strong></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">SQL排序</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">MySQL支持两种排序方式<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Filesort</strong>和<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Index</strong>，Index的效率高，它是指MySQL扫描索引本身完成排序，Filesort的效率低ORDER BY尽量使用Index方式进行排序，避免使用FileSort的方式，如果不在索引列上，FileSort有两种算法，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">双路排序</strong>和<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">单路排序</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">双路排序</strong><br/>
两次扫描，得到最终数据。从磁盘中读取满足查询条件的数据的<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">行指针(记录目标行在表中的位置)和需要排序的列</strong>，对它们在sort_buffer中进行排序之后将排序结果丢给随机读取缓冲区(read_rnd_buffer)，随机读取缓冲区根据指针信息再到磁盘中读取该行的其他字段数据</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">单路排序</strong><br/>
一次扫描，得到最终数据。从磁盘中读取满足查询条件行的所有的列，按照Order By在buffer中对数据进行排序，然后扫描排序后的列表进行输出。单路排序的效率更高，避免了第二次读取数据，减少了IO次数，降低了磁盘的开销，但是会使用更多的空间，因为把所有的字段都保存在内存中了</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">但是因为单路排序需要更大的磁盘空间，如果sort_buffer_size的大小不足，可能会导致两次甚至更多次的IO次数<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用单路排序的条件</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查询语句所取出的字段类型大小总和要小于max_length_for_sort_data</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">排序字段中不包含text和blob类型</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">当我们只能使用FileSort的时候我们可以通过增大<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">sort_buffer</strong>和增大<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">max_length_for_sort_data</strong>这两个属性来提高SQL效率<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">max_length_for_sort_data</strong>是指查询列中除去<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">text</strong>和<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">blob</strong>类型，其他字段大小的和，所以我们当使用了排序的时候，尽量不要使用SELECT *，只查询需要用到的字段<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">如何保证尽量使用Index排序</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">排序字段和建立索引的字段一致</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">排序字段遵循最佳左前缀原则</strong><br/>
使用WHERE语句和ORDER BY语句满足索引最左前列：如果WHERE中使用了索引字段作为等值条件，那么WHERE和ORDER BY连起来看满足最佳左前缀原则也是可以的</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">排序字段要么都升序要么都降序，如果一升一降会产生FileSort</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">排序中有不是索引的列会使用FileSort</strong></li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">GROUP BY的本质是先排序，后分组，所以遵循和ORDER BY一样的原则，只需要注意一点，当可以在WHERE中添加的限定条件，不要写在HAVING中</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">慢查询日志</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">MySQL的慢查询日志是MySQL提供的一种日志记录，默认关闭，用来记录MySQL中响应时间超过阈值的语句，具体时间超过long_query_time则被记录到慢查询日志中，long_query_time的默认值是10，意思是运行10秒以上的语句</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查询慢查询日志是否开启</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">VARIABLES</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LIKE</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'%slow_query_log%'</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#开启慢查询日志，只对当前数据库生效，重启后失效，想要永久开启需要修改配置文件(my.cnf)</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SET</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> slow_query_log=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#为慢日志文件指定位置和文件名</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SET</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> slow_query_log_file=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'C:\ProgramData\MySQL\MySQL Server 5.5\Data\slow20190901.log'</span>
</code></pre>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">Variable_name</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">Value</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">slow_query_log</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">OFF</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">slow_query_log_file</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">C:\ProgramData\MySQL\MySQL Server 5.5\Data\ZJZL-0190630XJ-slow.log</td></tr></tbody></table>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">系统会给一个默认的host_name_slow.log，可以通过<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">slow_query_log_file</strong>来设置</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查看当前阈值，多少秒会被记录到慢日志中。</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#判断逻辑是大于，刚好等于阈值不会记录到慢日志中</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">VARIABLES</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LIKE</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'%long_query_time%'</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#修改慢SQL阈值</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SET</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> long_query_time=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3</span>
</code></pre>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">Variable_name</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">Value</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">long_query_time</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">10.000000</td></tr></tbody></table>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查看当前有多少条慢SQL</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">STATUS</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LIKE</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'%slow_queries%'</span>
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">mysqldumpslow日志分析工具</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">mysqldumpslow--help查看帮助信息</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">-s<br/>
是按照何种方式排序，后面跟ctrl<br/>
c：访问次数<br/>
t：查询时间<br/>
r：返回记录<br/>
l：锁定时间<br/>
al：平均锁定时间<br/>
ar：平均返回记录数<br/>
at：平均返回查询时间</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">-t<br/>
后面跟一个数字，表示返回前多少条符合条件的数据</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">-g<br/>
后面接一个正则表达式</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">得到返回记录数最多的前十条SQL
mysqldumpslow -s r -t 10/慢日志路径
得到按时间排序最长的且有左连接查询的前十条数据
mysqldumpslow -s t -t 10 -g&quot;left join&quot;/慢日志路径
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">Show Profile</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">是MySQL提供的可以用来分析当前会话中语句执行的资源消耗情况，默认关闭，并保存最近15次的运行结果</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查看是否开启show profile</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">VARIABLES</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LIKE</span><span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'%profiling%'</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#开启show profile</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SET</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> profiling=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#使用show profiles</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">profiles</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">我们可以看到每一条被记录的SQL的执行时间</p>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">QUERY_ID</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">Duration</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">Query</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">1</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0.00190025</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">show variables like'%profiling%'</td></tr></tbody></table>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">通过下面语句，在字段QUERY后面写上对应的QUERY ID可以得到具体的每一个执行流程的时间</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">show profile主要参数</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">ALL<br/>
显示所有开销信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">BLOCK IO</strong><br/>
显示块IO相关开销</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">CONTEXT SWITCHES<br/>
上下文切换相关开销</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">CPU</strong><br/>
显示CPU相关开销信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">IPC<br/>
显示发送和接收相关开销信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">MEMORY</strong><br/>
显示内存相关开销信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">PAGE FAULTS<br/>
显示页码错误相关开销信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">SOURCE<br/>
显示Source_function，Source_file，Source_line相关开销信息</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">SWAPS<br/>
显示交换次数相关开销的信息</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> PROFILE CPU,<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">BLOCK</span> IO <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FOR</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">QUERY</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">主要关注下面这些参数的时间，出现任意一个都是必须要进行优化的</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Converting HEAP to MyISAM<br/>
查询结果太大，内存不足，需要把查询结果搬运到磁盘中</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Creating temp table</strong><br/>
创建临时表：把数据拷贝到临时表中，用完再删除临时表</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Copy to temp table on disk</strong><br/>
把内存中的数据拷贝到磁盘中，非常危险的情况</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Locked<br/>
加锁</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">全局查询日志</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">可以记录所有的SQL语句，并存储在系统表中，永远不要再生产环境开启这个功能</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#开启全局查询日志</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SET</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> general_log =<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#以表的形式</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SET</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">GLOBAL</span> log_output=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'TABLE'</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查看全局查询日志</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> * <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> mysql.general_log
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">MySQL锁机制</h3>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">锁的分类</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">对数据的操作类型划分</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">读锁<br/>
针对同一份数据，多个读操作可以同时进行而不会互相影响</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">写锁<br/>
当前写操作没有完成前，会阻断其他的写锁和读锁</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">对数据操作的粒度划分</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">行锁</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">表锁</li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">表锁</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">偏向MyISAM存储引擎，开销小，加锁快，不会出现死锁，但是锁的粒度大，发生锁冲突的概率高，并发度很低</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#手动添加表锁(读锁|写锁)</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">LOCK</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">TABLE</span>   [tableName [<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">READ</span>|WRITE]] , [ ] , [ ]……
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#查看表上加过的锁</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SHOW</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">OPEN</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">TABLES</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#释放表锁</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">UNLOCK</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">TABLES</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">表读锁</strong><br/>
加锁session可以读加锁表，不可以写(报错)，不可以读写其他表(报错)，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">只读不可写</strong><br/>
其他session可以读加锁表，不可以写(阻塞)，可以读写其他未加锁表，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">可读写阻塞</strong><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">表写锁</strong><br/>
加锁session 可以读加锁表，可以写加锁表，不可以读写其他表，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">可读可写</strong><br/>
其他session 不可以读(阻塞)，不可以写，可以读写其他表，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">读阻塞不可写</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">加锁session只可以处理自己加锁的表</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">读锁阻塞其他session的写操作，加锁session不可以写</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">写锁阻塞其他session的所有操作，加锁session可读可写</strong></li>
</ul>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">行锁</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">偏向InnoDB存储引擎，开销大，加锁慢，可能会出现死锁，但是锁的粒度最小，发生锁冲突的概率最小，并发度最高</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">InnoDB存储引擎默认的事务隔离级别是不可重复读，这种隔离级别下的行锁有以下特点</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">加锁session可以写，可以读<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">最新的、未提交</strong>的数据，读己之所写</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">其他session读不到未提交的数据，并且阻塞对同一行的写操作</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">索引失效会导致行锁升级为表锁<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">间隙锁</strong><br/>
当我们用范围条件而不是等值条件来给数据加锁时，InnoDB会给符合条件的已有数据记录的索引项加锁，对于键值在条件范围内但是并不存在的数据被称为间隙。InnoDB也会对这个间隙加锁，这种锁机制就叫间隙锁。<br/>
间隙锁会导致范围内，不存在的键值也被锁定，所以在锁定后无法插入键值范围内的任何数据，某些情况会影响性能</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">如何锁定一行</strong><br/>
使用关键字FOR UPDATE，直到提交才会释放锁</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">SELECT</span> * <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FROM</span> tableName <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">WHERE</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">FOR</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">UPDATE</span>
</code></pre>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">主从复制</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">slave会从master读取binlog来进行数据同步，master将改变记录到二进制文件中，这些记录过程叫做二进制日志事件，slave将maser的二进制文件拷贝到它的中继日志中，slave重做中继日志中的事件，将改变应用到自己的数据库中。MySQL的主从复制是，异步且串行化，所以会有延迟的问题。<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">注意：</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">每个slave只能有一个master</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">一个master可以有多个slave</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">每个slave只能有一个唯一的服务器ID</li>
</ul>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">主机修改配置文件my.ini</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">server-id</strong>   <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">必须</strong><br/>
这是服务器的唯一ID</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">log-bin</strong> <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">必须</strong><br/>
启用二进制日志<br/>
本地路径/mysqlbin</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">log-err</strong> <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">可选</strong><br/>
启用错误日志<br/>
本地路径、mysqlerr</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">binlog-ignore-db</strong> <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">可选</strong><br/>
设置不需要复制的数据库<br/>
后面写数据库的名字</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">binlog-do-db</strong> <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">可选</strong><br/>
设置需要复制的数据库</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">从机只需要配置服务器ID即可</strong></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">在主机上建立账户并授权给从机</h4>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">CRANT REPLICATION SLAVE ON *.* 'userName' @ '主机IP' IDENTIFIED BY 'passWord'<br/>
把userName，passWord替换成想要建立的账户，使用MySQL的命令行来执行</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">flush privileges<br/>
刷新</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">show master status<br/>
记录File和Postion的值，记录要复制哪一个二进制文件和要开始复制的位置，注意，这时候不要操作主机，否则这两个值会变化</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">在从机上配置完成配置<br/>
CHANGE MASTER TO MASTER_HOST='主机IP',MASTER_USER='userName',MASTER_PASSWORD='passWord',MASTER_LOG_FILE='',MASTER_LOG_POS=</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">STARE SLAVE<br/>
启动主从复制服务</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">配置完成后使用<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">SHOW SLAVE STATUS</strong>命令，如果<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">SLAVE_IO_RUNNING</strong>和<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">SLAVE_SQL_RUNNING</strong>同为YES则表示配置成功</p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%5Btoc%5D%0A%23%23%23%20MySQL%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A*%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97%0A**log-bin**%E7%94%A8%E4%BA%8E%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%86%99%E8%A1%8C%E4%B8%BA%EF%BC%8C%E7%94%A8%E4%BA%8E%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%0A*%20%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%0A**log-error**%E9%BB%98%E8%AE%A4%E5%85%B3%E9%97%AD%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%AE%B0%E5%BD%95%E4%B8%A5%E9%87%8D%E7%9A%84%E9%94%99%E8%AF%AF%E5%92%8C%E8%AD%A6%E5%91%8A%E4%BF%A1%E6%81%AF%EF%BC%8C%E6%AF%8F%E6%AC%A1%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF%0A*%20%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%20%0A**log**%E9%BB%98%E8%AE%A4%E5%85%B3%E9%97%AD%EF%BC%8C%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%BC%80%E5%90%AF%E4%BC%9A%E9%99%8D%E4%BD%8EMySQL%E7%9A%84%E6%95%B4%E4%BD%93%E6%80%A7%E8%83%BD%0A*%20%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%0A%20%20%20%20*%20frm%E6%96%87%E4%BB%B6%EF%BC%9A%E5%AD%98%E6%94%BE%E8%A1%A8%E7%BB%93%E6%9E%84%0A%20%20%20%20*%20myd%E6%96%87%E4%BB%B6%EF%BC%9A%E5%AD%98%E6%94%BE%E8%A1%A8%E6%95%B0%E6%8D%AE%0A%20%20%20%20*%20myi%E6%96%87%E4%BB%B6%EF%BC%9A%E5%AD%98%E6%94%BE%E8%A1%A8%E7%B4%A2%E5%BC%95%0A*%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0Awindows%EF%BC%9A**my.ini**%20%0ALinux%EF%BC%9A**my.cnf**%0A%23%23%23%20MyISAM%E5%92%8CInnoDB%E7%9A%84%E5%8C%BA%E5%88%AB%0A*%20MyISAM%E4%B8%8D%E6%94%AF%E6%8C%81%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E3%80%81%E5%A4%96%E9%94%AE%E7%AD%89%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8A%9F%E8%83%BD%EF%BC%8C%E8%80%8CInnoDB%E6%94%AF%E6%8C%81%0A*%20MyISAM%E5%BC%BA%E8%B0%83%E7%9A%84%E6%98%AF%E6%80%A7%E8%83%BD%EF%BC%8C%E5%85%B6%E6%89%A7%E8%A1%8C%E9%80%9F%E5%BA%A6%E6%AF%94InnoDB%E6%9B%B4%E5%BF%AB%0A*%20MyISAM%E5%8F%AA%E6%9C%89%E8%A1%A8%E9%94%81%EF%BC%8CInnoDB%E6%94%AF%E6%8C%81%E8%A1%8C%E9%94%81(%E5%9F%BA%E4%BA%8E%E7%B4%A2%E5%BC%95%E7%9A%84%E8%A1%8C%E9%94%81)%0A*%20InnoDB%E4%B8%8D%E4%BF%9D%E5%AD%98%E8%A1%A8%E7%9A%84%E5%85%B7%E4%BD%93%E8%A1%8C%E6%95%B0%EF%BC%8C%E6%89%A7%E8%A1%8Cselect%20count(%5C*)%20from%20table%E6%97%B6%E9%9C%80%E8%A6%81%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%E3%80%82%E8%80%8CMyISAM%E7%94%A8%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E4%BF%9D%E5%AD%98%E4%BA%86%E6%95%B4%E4%B8%AA%E8%A1%A8%E7%9A%84%E8%A1%8C%E6%95%B0%EF%BC%8C%E6%89%A7%E8%A1%8C%E4%B8%8A%E8%BF%B0%E8%AF%AD%E5%8F%A5%E6%97%B6%E5%8F%AA%E9%9C%80%E8%A6%81%E6%A3%80%E7%B4%A2%E5%87%BA%E8%BF%99%E4%B8%AA%E5%8F%98%E9%87%8F%E5%B0%B1%E8%A1%8C%0A%0A%E7%BB%BC%E4%B8%8A%EF%BC%8CMyISAM%E5%BC%95%E6%93%8E%E9%80%82%E5%90%88%E8%AF%BB%E5%A4%9A%E5%86%99%E5%B0%91%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E8%80%8C%E5%A4%A7%E9%87%8F%E7%9A%84%E5%86%99%E6%93%8D%E4%BD%9C%E5%88%99%E9%9C%80%E8%A6%81%E7%94%A8InnoDB%E6%9D%A5%E4%BF%9D%E8%AF%81%E6%80%A7%E8%83%BD%E5%92%8C%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%86%E7%A1%AE%E6%80%A7%E3%80%82%E8%80%8CInnoDB%E4%B9%9F%E6%98%AFMySQL5.5%E4%B9%8B%E5%90%8E%E7%9A%84%E9%BB%98%E8%AE%A4%E5%BC%95%E6%93%8E%0A%23%23%23%20SQL%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%0A%60%60%60sql%0ASELECT%20DISTINCT%0AFROM%20tbleName1%0A%5BINNER%7CLEFT%7CRIGHT%5D%20JOIN%20tableName2%0AON%0A%20%20%20%20%5B%E8%BF%9E%E6%8E%A5%E6%9D%A1%E4%BB%B6%5D%0AWHERE%0A%20%20%20%20%5B%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%5D%0AGROUP%20BY%0A%20%20%20%20%5B%E5%88%86%E7%BB%84%E6%9D%A1%E4%BB%B6%5D%0AHAVING%0A%20%20%20%20%5B%E5%88%86%E7%BB%84%E5%90%8E%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%5D%0AORDER%20BY%20%5B%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%5D%20%5BASC%7CDESC%5D%0ALIMIT%0A%20%20%20%20%5B%E8%B5%B7%E5%A7%8B%E7%B4%A2%E5%BC%95%E6%95%B0%EF%BC%8C%E6%AF%8F%E9%A1%B5%E6%9D%A1%E7%9B%AE%E6%95%B0%5D%0A%20%20%20%20%5Bsize*(page-1)%EF%BC%8Csize%5D%0A%60%60%60%0A%0AMySQL%E6%89%A7%E8%A1%8CSQL%E7%9A%84%E9%A1%BA%E5%BA%8F%E4%BB%8EFrom%E5%BC%80%E5%A7%8B%EF%BC%8C%E4%BB%A5%E4%B8%8B%E6%98%AF%E6%89%A7%E8%A1%8C%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%B5%81%E7%A8%8B%0A%0A**FROM**-%3E**WHERE**-%3E**GROUP%20BY**-%3E**HAVING**-%3E**SELECT**-%3E**DISTINCT**-%3E**ORDER%20BY**-%3E**LIMIT**%0A1.%20FROM%20tbleName1%5BINNER%7CLEFT%7CRIGHT%5D%20JOIN%20tableName2%E5%B0%86%E4%B8%A4%E4%B8%AA%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BA%A7%E7%94%9F%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%EF%BC%8C%E7%94%9F%E6%88%90%E4%B8%B4%E6%97%B6%E8%A1%A8V1%E3%80%82%E5%86%8D%E5%B0%86ON%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%9D%A1%E4%BB%B6%E5%BA%94%E7%94%A8%E5%88%B0V1%E7%9A%84%E6%AF%8F%E4%B8%80%E8%A1%8C%EF%BC%8C%E5%86%8D%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E8%A1%A8V2%E3%80%82%E8%BF%99%E6%97%B6%E5%86%8D%E5%88%A4%E6%96%AD%E6%98%AFLEFT%20JOIN%E8%BF%98%E6%98%AFRIGHT%20JOIN%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8A%8A%E5%88%9A%E6%89%8D%E7%9B%B8%E5%BA%94%E7%9A%84%E8%A1%A8%E4%B8%AD%E8%A2%AB%E8%BF%87%E6%BB%A4%E7%9A%84%E8%A1%8C%E6%B7%BB%E5%8A%A0%E5%88%B0V2%E4%B8%AD%E7%94%9F%E6%88%90%E4%B8%B4%E6%97%B6%E8%A1%A8V3%E3%80%82%E5%A6%82%E6%9E%9CFROM%E4%B8%AD%E5%85%B3%E8%81%94%E4%BA%86%E4%B8%A4%E4%B8%AA%E8%A1%A8%E4%BB%A5%E4%B8%8A%E5%88%99%E7%AC%AC%E4%B8%89%E8%A1%A8%E5%92%8CV3%E9%87%8D%E5%A4%8D%E4%B8%8A%E9%9D%A2%E7%9A%84%E8%BF%87%E7%A8%8B%0A2.%20WHERE%E5%AF%B9%E4%B8%B4%E6%97%B6%E8%A1%A8V3%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4%E4%BA%A7%E7%94%9F%E4%B8%AD%E9%97%B4%E8%A1%A8V4%E3%80%82%E5%BA%94%E7%94%A8where%E7%AD%9B%E9%80%89%E5%99%A8%EF%BC%8C%E5%AF%B9%E4%B8%8A%E4%B8%80%E6%AD%A5%E7%94%9F%E4%BA%A7%E7%9A%84%E8%99%9A%E6%8B%9F%E8%A1%A8%E5%BC%95%E7%94%A8WHERE%E7%AD%9B%E9%80%89%E5%99%A8%EF%BC%8C%E7%94%9F%E6%88%90%E8%99%9A%E6%8B%9F%E8%A1%A8V4%EF%BC%8CON%E5%92%8CWHERE%E6%9C%80%E5%A4%A7%E5%8C%BA%E5%88%AB%E5%9C%A8%E4%BA%8E%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%9C%A8ON%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%82%A3%E4%B9%88%E5%9C%A8%E7%AC%AC%E4%B8%89%E6%AD%A5OUTER%20JOIN%E4%B8%AD%E8%BF%98%E5%8F%AF%E4%BB%A5%E6%8A%8A%E7%A7%BB%E9%99%A4%E7%9A%84%E8%A1%8C%E5%86%8D%E6%AC%A1%E6%B7%BB%E5%8A%A0%E5%9B%9E%E6%9D%A5%EF%BC%8C%E8%80%8CWHERE%E7%9A%84%E7%A7%BB%E9%99%A4%E6%98%AF%E4%B8%8D%E5%8F%AF%E6%81%A2%E5%A4%8D%E7%9A%84%0A3.%20GROUP%20BY%20%E5%AF%B9%E4%B8%AD%E9%97%B4%E8%A1%A8V4%E8%BF%9B%E8%A1%8C%E5%88%86%E7%BB%84%EF%BC%8C%E4%BA%A7%E7%94%9F%E8%99%9A%E6%8B%9F%E8%A1%A8V5%E3%80%82GROUP%20BY%E5%AD%90%E5%8F%A5%E5%B0%86%E4%B8%AD%E7%9A%84%E5%94%AF%E4%B8%80%E7%9A%84%E5%80%BC%E7%BB%84%E5%90%88%E6%88%90%E4%B8%BA%E4%B8%80%E7%BB%84%EF%BC%8C%E5%BE%97%E5%88%B0%E8%99%9A%E6%8B%9F%E8%A1%A8V5%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E4%BA%86GROUP%20BY%EF%BC%8C%E9%82%A3%E4%B9%88%E5%90%8E%E9%9D%A2%E7%9A%84%E6%89%80%E6%9C%89%E6%AD%A5%E9%AA%A4%E9%83%BD%E5%8F%AA%E8%83%BD%E5%BE%97%E5%88%B0%E7%9A%84V5%E7%9A%84%E5%88%97%E6%88%96%E8%80%85%E6%98%AF%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%EF%BC%88COUNT%E3%80%81SUM%E3%80%81MAX%E7%AD%89%EF%BC%89%E3%80%82%E5%8E%9F%E5%9B%A0%E5%9C%A8%E4%BA%8E%E6%9C%80%E7%BB%88%E7%9A%84%E7%BB%93%E6%9E%9C%E9%9B%86%E4%B8%AD%E5%8F%AA%E4%B8%BA%E6%AF%8F%E4%B8%AA%E7%BB%84%E5%8C%85%E5%90%AB%E4%B8%80%E8%A1%8C%0A4.%20HAVING%E5%AF%B9%E5%88%86%E7%BB%84%E5%90%8E%E7%9A%84%E8%AE%B0%E5%BD%95%E8%BF%9B%E8%A1%8C%E7%AD%9B%E9%80%89%EF%BC%8C%E5%92%8CWHERE%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%E4%BA%A7%E7%94%9F%E8%99%9A%E6%8B%9F%E8%A1%A8V6%0A5.%20SELECT%E5%AF%B9%E8%99%9A%E6%8B%9F%E8%A1%A8V6%E8%BF%9B%E8%A1%8C%E5%88%97%E7%AD%9B%E9%80%89%EF%BC%8C%E9%80%89%E6%8B%A9%E5%87%BA%E8%A6%81%E8%A1%A8%E7%A4%BA%E7%9A%84%E5%88%97%EF%BC%8C%E4%BA%A7%E7%94%9F%E8%99%9A%E6%8B%9F%E8%A1%A8V7%0A6.%20DISTINCT%E5%AF%B9%E4%B8%AD%E9%97%B4%E8%A1%A8V7%E8%BF%9B%E8%A1%8C%E5%8E%BB%E9%87%8D%EF%BC%8C%E4%BA%A7%E7%94%9F%E4%B8%AD%E9%97%B4%E8%A1%A8V8%0A7.%20ORDER%20BY%E5%AF%B9V8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E4%BA%A7%E7%94%9F%E4%B8%AD%E9%97%B4%E8%A1%A8V9%E3%80%82%E6%8E%92%E5%BA%8F%E6%98%AF%E5%BE%88%E9%9C%80%E8%A6%81%E6%88%90%E6%9C%AC%E7%9A%84%EF%BC%8C%E9%99%A4%E9%9D%9E%E4%BD%A0%E5%BF%85%E9%A1%BB%E8%A6%81%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%90%A6%E5%88%99%E6%9C%80%E5%A5%BD%E4%B8%8D%E8%A6%81%E6%8C%87%E5%AE%9A%E6%8E%92%E5%BA%8F%0A8.%20LIMIT%E5%AF%B9%E4%B8%AD%E9%97%B4%E8%A1%A8V9%E8%BF%9B%E8%A1%8C%E5%88%86%E9%A1%B5%EF%BC%8C%E4%BA%A7%E7%94%9F**%E6%9C%80%E7%BB%88%E7%BB%93%E6%9E%9C**%0A%0A%E6%89%80%E6%9C%89%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E9%83%BD%E6%98%AF%E4%BB%8Efrom%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E7%9A%84%EF%BC%8C%E5%9C%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E6%AF%8F%E4%B8%AA%E6%AD%A5%E9%AA%A4%E9%83%BD%E4%BC%9A%E4%B8%BA%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%AD%A5%E9%AA%A4%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E8%99%9A%E6%8B%9F%E8%A1%A8%EF%BC%8C%E8%BF%99%E4%B8%AA%E8%99%9A%E6%8B%9F%E8%A1%A8%E5%B0%86%E4%BD%9C%E4%B8%BA%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4%E7%9A%84%E8%BE%93%E5%85%A5%E3%80%82%0A%0A%23%23%23%20%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%0ASQL%E6%85%A2%E6%98%AF%E6%8C%87%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%E9%95%BF%E6%88%96%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4%E9%95%BF%EF%BC%8C%E5%8E%9F%E5%9B%A0%E6%98%AF%0A*%20%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E5%86%99%E7%9A%84%E6%9C%89%E9%97%AE%E9%A2%98%0A*%20%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%0A*%20%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E5%A4%AA%E5%A4%9A%0A*%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%88%E7%90%86%E6%88%96%E8%80%85%E5%B7%B2%E8%BE%BE%E5%88%B0%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%0A%0A%23%23%23%23%20%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95%0A**%E6%8E%92%E5%A5%BD%E5%BA%8F%E7%9A%84%E3%80%81%E7%94%A8%E4%BA%8E%E5%BF%AB%E9%80%9F%E6%9F%A5%E6%89%BE%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84**%E3%80%82%E5%9C%A8%E6%95%B0%E6%8D%AE%E4%B9%8B%E5%A4%96%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%98%E7%BB%B4%E6%8A%A4%E7%9D%80%E6%BB%A1%E8%B6%B3%E7%89%B9%E5%AE%9A%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%8C%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%A5%E6%9F%90%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8A%E5%AE%9E%E7%8E%B0%E9%AB%98%E7%BA%A7%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%B0%B1%E6%98%AF%E7%B4%A2%E5%BC%95%E3%80%82%E5%AF%B9%E4%BA%8E%E6%88%91%E4%BB%ACJava%E7%A8%8B%E5%BA%8F%E5%91%98%E6%9D%A5%E8%AF%B4%EF%BC%8C%E8%BF%99%E7%A7%8D%E7%B4%A2%E5%BC%95%E5%B0%B1%E6%98%AFB%20TREE%E7%B4%A2%E5%BC%95(%E5%A4%9A%E8%B7%AF%E6%90%9C%E7%B4%A2%E6%A0%91)%0A**%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BC%98%E7%82%B9**%0A*%20%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E7%9A%84%E9%80%9F%E5%BA%A6%EF%BC%8C%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%95%88%E7%8E%87%EF%BC%8C%E9%99%8D%E4%BD%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84IO%E6%88%90%E6%9C%AC%0A*%20%E9%80%9A%E8%BF%87%E7%B4%A2%E5%BC%95%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E9%99%8D%E4%BD%8E%E4%BA%86%E6%8E%92%E5%BA%8F%E5%92%8C%E5%88%86%E7%BB%84%E7%9A%84%E6%88%90%E6%9C%AC%EF%BC%8C%E5%87%8F%E5%B0%91%E4%BA%86CPU%E7%9A%84%E6%B6%88%E8%80%97%0A%0A**%E7%B4%A2%E5%BC%95%E7%9A%84%E7%BC%BA%E7%82%B9**%0A*%20%E7%B4%A2%E5%BC%95%E7%9A%84%E6%9C%AC%E8%B4%A8%E4%B9%9F%E6%98%AF%E4%B8%80%E5%BC%A0%E8%A1%A8%EF%BC%8C%E4%BF%9D%E5%AD%98%E4%BA%86%E4%B8%BB%E9%94%AE%E5%92%8C%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%B9%B6%E6%8C%87%E5%90%91%E5%AE%9E%E4%BD%93%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E3%80%82%E7%B4%A2%E5%BC%95%E6%98%AF%E7%94%A8%E7%A9%BA%E9%97%B4%E6%9D%A5%E6%8D%A2%E5%8F%96%E6%97%B6%E9%97%B4%EF%BC%8C%E7%BC%A9%E7%9F%AD%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%97%B6%E9%97%B4%E6%88%90%E6%9C%AC%E7%9A%84%E5%90%8C%E6%97%B6%EF%BC%8C%E8%A6%81%E7%89%BA%E7%89%B2%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%88%90%E6%9C%AC%E6%9D%A5%E5%AD%98%E5%82%A8%E7%B4%A2%E5%BC%95%0A*%20%E7%B4%A2%E5%BC%95%E4%BC%9A%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E9%80%9F%E5%BA%A6%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BC%9A%E9%99%8D%E4%BD%8E%E8%A1%A8%E7%9A%84%E6%9B%B4%E6%96%B0%E9%80%9F%E5%BA%A6%E3%80%82%E7%B4%A2%E5%BC%95%E5%88%9B%E5%BB%BA%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%9C%A8%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%A2%9E%E3%80%81%E5%88%A0%E3%80%81%E6%94%B9%E7%AD%89%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%90%8E%EF%BC%8C%E7%9B%B8%E5%BA%94%E7%9A%84%E7%B4%A2%E5%BC%95%E4%B9%9F%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E7%BB%B4%E6%8A%A4%0A%0A**%E7%B4%A2%E5%BC%95%E7%9A%84%E7%A7%8D%E7%B1%BB**%0A*%20%E5%8D%95%E5%80%BC%E7%B4%A2%E5%BC%95%0A%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95%E5%8F%AA%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E5%88%97%EF%BC%8C%E4%B8%80%E4%B8%AA%E8%A1%A8%E5%8F%AF%E4%BB%A5%E6%9C%89%E5%A4%9A%E4%B8%AA%E5%8D%95%E5%80%BC%E7%B4%A2%E5%BC%95%0A*%20%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95%0A%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95%E5%8C%85%E5%90%AB%E5%A4%9A%E4%B8%AA%E5%88%97%0A*%20%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%0A%E7%B4%A2%E5%BC%95%E5%88%97%E7%9A%84%E5%80%BC%E5%94%AF%E4%B8%80%EF%BC%8C%E4%BD%86%E6%98%AF%E5%85%81%E8%AE%B8%E6%9C%89%E7%A9%BA%E5%80%BC%0A%60%60%60sql%0A%23%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%0A%23%E5%AF%B9%E4%BA%8E%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%97%B6%E5%A6%82%E6%9E%9C%E6%98%AFblob%E5%92%8Ctext%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%BF%85%E9%A1%BB%E6%8C%87%E5%AE%9Alength%0ACREATE%20%5BUNIQUE%5D%20INDEX%20indexName%20ON%20tableName(columnName1%2CcolumnName2)%0AALTER%20TABLE%20tableName%20ADD%20%5BUNIQUE%5D%20INDEX%20%5BindexName%5D%20ON%20(columnName)%0A%23%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%0ADROP%20INDEX%20indexName%20ON%20tableName%0A%23%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95%0ASHOW%20INDEX%20FROM%20tableName%0A%60%60%60%0A**%E5%B7%A6%E8%BF%9E%E6%8E%A5%E5%BB%BA%E5%8F%B3%E8%A1%A8**%0A%E5%A4%9A%E8%A1%A8%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%B7%A6%E8%BF%9E%E6%8E%A5%E5%B0%86%E7%B4%A2%E5%BC%95%E5%BB%BA%E5%9C%A8%E5%8F%B3%E8%A1%A8%E7%9A%84%E4%B8%BB%E5%A4%96%E9%94%AE%E4%B8%8A%EF%BC%8C%E5%8F%B3%E8%BF%9E%E6%8E%A5%E5%B0%86%E7%B4%A2%E5%BC%95%E5%BB%BA%E7%AB%8B%E5%9C%A8%E5%B7%A6%E8%A1%A8%E7%9A%84%E4%B8%BB%E5%A4%96%E9%94%AE%E4%B8%8A%E3%80%82%E5%9B%A0%E4%B8%BA%E5%B7%A6%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%97%B6%E5%80%99%E5%B7%A6%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%A8%E9%83%A8%E9%83%BD%E6%9C%89%EF%BC%8C%E8%80%8C%E5%8F%B3%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9C%80%E8%A6%81%E7%AD%9B%E9%80%89%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E4%B8%BB%E8%A1%A8%E6%98%AF%E4%B8%80%E5%AE%9A%E9%9C%80%E8%A6%81%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%E7%9A%84%EF%BC%8C%E8%80%8C%E5%AD%90%E8%A1%A8%E4%B8%8D%E9%9C%80%E8%A6%81%EF%BC%8C%E6%89%80%E4%BB%A5%E7%B4%A2%E5%BC%95%E5%BB%BA%E5%9C%A8%E5%AD%90%E8%A1%A8%E4%B8%8A%0A*%20**%E5%93%AA%E4%BA%9B%E6%83%85%E5%86%B5%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95**%0A%20%20%20%20*%20%E4%B8%BB%E9%94%AE%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%0A%20%20%20%20*%20%E9%A2%91%E7%B9%81%E4%BD%9C%E4%B8%BA%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%AD%97%E6%AE%B5%E5%BA%94%E8%AF%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%0A%20%20%20%20*%20%E6%9F%A5%E8%AF%A2%E4%B8%AD%E4%B8%8E%E5%85%B6%E5%AE%83%E8%A1%A8%E5%BB%BA%E7%AB%8B%E8%81%94%E7%B3%BB%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%A4%96%E9%94%AE%E5%85%B3%E7%B3%BB%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%0A%20%20%20%20*%20%E9%AB%98%E5%B9%B6%E5%8F%91%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%81%8F%E5%90%91%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95%0A%20%20%20%20*%20%E6%9F%A5%E8%AF%A2%E4%B8%AD%E6%8E%92%E5%BA%8F%E7%9A%84%E7%B4%A2%E5%BC%95%EF%BC%8C%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E8%8B%A5%E9%80%9A%E8%BF%87%E7%B4%A2%E5%BC%95%E5%8E%BB%E8%AE%BF%E9%97%AE%E5%B0%86%E5%A4%A7%E5%A4%A7%E7%9A%84%E6%8F%90%E9%AB%98%E6%8E%92%E5%BA%8F%E9%80%9F%E5%BA%A6%0A%20%20%20%20*%20%E6%9F%A5%E8%AF%A2%E4%B8%AD%E7%BB%9F%E8%AE%A1%E6%88%96%E5%88%86%E7%BB%84%E7%9A%84%E5%AD%97%E6%AE%B5%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%0A%0A*%20**%E5%93%AA%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8D%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95**%0A%20%20%20%20*%20%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%AE%B0%E5%BD%95%E5%A4%AA%E5%B0%91%0A%20%20%20%20*%20%E7%BB%8F%E5%B8%B8%E5%A2%9E%E5%88%A0%E6%94%B9%E7%9A%84%E8%A1%A8%0A%20%20%20%20*%20%E6%95%B0%E6%8D%AE%E9%87%8D%E5%A4%8D%E4%B8%94%E5%B9%B3%E5%9D%87%E5%88%86%E5%B8%83%E7%9A%84%E8%A1%A8%E5%AD%97%E6%AE%B5%0A%20%20%20%20*%20WHERE%E6%9D%A1%E4%BB%B6%E9%87%8C%E9%9D%A2%E7%94%A8%E4%B8%8D%E5%88%B0%E7%9A%84%E5%AD%97%E6%AE%B5%E4%B8%8D%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%0A%20%20%20%20*%20%E9%A2%91%E7%B9%81%E6%9B%B4%E6%96%B0%E7%9A%84%E5%AD%97%E6%AE%B5%E4%B8%8D%E9%80%82%E5%90%88%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%AF%8F%E6%AC%A1%E6%9B%B4%E6%96%B0%E8%BF%98%E9%9C%80%E8%A6%81%E7%BB%B4%E6%8A%A4%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%8A%A0%E9%87%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84IO%E8%B4%9F%E6%8B%85%0A%0A%E7%BA%A6%E5%AE%9A%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4%E4%B8%80%E5%BC%A0%E8%A1%A8%E4%B8%8D%E8%A6%81%E5%BB%BA%E7%AB%8B%E8%B6%85%E8%BF%875%E4%B8%AA%E7%B4%A2%E5%BC%95%0A%0A%23%23%23%23%20%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%0A%E4%BD%BF%E7%94%A8**EXPLAIN**%E6%9D%A5%E6%A8%A1%E6%8B%9F%E4%BC%98%E5%8C%96%E5%99%A8%E6%89%A7%E8%A1%8CSQL%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%EF%BC%8C%E4%BB%8E%E8%80%8C%E7%9F%A5%E9%81%93MySQL%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E4%BD%A0%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%EF%BC%8C%E5%88%86%E6%9E%90%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88%0A%60%60%60sql%0A%23%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%20EXPLAIN%20%2B%20%E7%9B%AE%E6%A0%87SQL%0AEXPLAIN%20SELECT%20*%20FROM%20human%0A%60%60%60%0A*%20**id**%0ASELECT%E7%9A%84%E6%9F%A5%E8%AF%A2%E5%BA%8F%E5%8F%B7%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%9F%A5%E8%AF%A2%E4%B8%AD%E6%89%A7%E8%A1%8C%E7%9A%84SELECT%E5%AD%90%E5%8F%A5%E6%88%96%E8%80%85%E6%93%8D%E4%BD%9C%E8%A1%A8%E7%9A%84%E9%A1%BA%E5%BA%8F%E3%80%82id%E5%A6%82%E6%9E%9C%E7%9B%B8%E5%90%8C%E7%9A%84%E8%AF%9D%EF%BC%8C%E8%87%AA%E4%B8%8A%E8%80%8C%E4%B8%8B%E6%89%A7%E8%A1%8C%EF%BC%9Bid%E4%B8%8D%E5%90%8C%E7%9A%84%E8%AF%9D%EF%BC%8Cid%E8%B6%8A%E5%A4%A7%E8%B6%8A%E4%BC%98%E5%85%88%E6%89%A7%E8%A1%8C%0A*%20**select%20type**%0A%20%20%20%20*%20simple%0A%20%20%20%20%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%88%96%E8%80%85%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%0A%20%20%20%20*%20primary%0A%20%20%20%20%E6%9F%A5%E8%AF%A2%E4%B8%AD%E8%8B%A5%E5%8C%85%E5%90%AB%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%8C%E4%B8%BB%E6%9F%A5%E8%AF%A2%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BAprimary%0A%20%20%20%20*%20subquery%0A%20%20%20%20SELECT%E6%88%96WHERE%E4%B8%AD%E5%8C%85%E5%90%AB%E4%BA%86%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%BC%9A%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BAsubquery%0A%20%20%20%20*%20derived%0A%20%20%20%20%E5%9C%A8from%E5%88%97%E8%A1%A8%E4%B8%AD%E5%8C%85%E5%90%AB%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BAderived(%E8%A1%8D%E7%94%9F)%EF%BC%8C%E5%8D%B3%E6%9F%A5%E7%9A%84%E8%A1%A8%E6%98%AF%E5%85%B6%E4%BB%96%E6%9F%A5%E8%AF%A2%E7%94%9F%E6%88%90%E7%9A%84%E4%B8%AD%E9%97%B4%E8%A1%A8%EF%BC%8C%E5%90%8E%E9%9D%A2%E4%BC%9A%E6%9C%89%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%EF%BC%8C%E9%82%A3%E6%98%AFid%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA%E6%98%AF%E9%82%A3%E4%B8%80%E4%B8%AA%E8%A1%A8%E7%9A%84%E8%A1%8D%E7%94%9F%E8%A1%A8%0A%20%20%20%20*%20union%0A%20%20%20%20%E5%A6%82%E6%9E%9C%E7%AC%AC%E4%BA%8C%E4%B8%AAselect%E5%87%BA%E7%8E%B0%E5%9C%A8union%E5%90%8E%E9%9D%A2%EF%BC%8C%E5%88%99%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BAunion%EF%BC%8C%E5%A6%82%E6%9E%9Cunion%E5%8C%85%E5%90%AB%E5%9C%A8from%E5%AD%90%E5%8F%A5%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%B8%AD%EF%BC%8C%E5%A4%96%E5%B1%82%E7%9A%84select%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BAderived%0A%20%20%20%20*%20union%20select%0A%20%20%20%20%E4%BB%8Eunion%E7%9A%84%E7%BB%93%E6%9E%9C%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%9C%E7%9A%84select%0A*%20**table**%0A%E6%98%BE%E7%A4%BA%E8%BF%99%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE%E6%98%AF%E5%85%B3%E4%BA%8E%E9%82%A3%E4%B8%80%E4%B8%AA%E8%A1%A8%E7%9A%84%0A*%20**type**%0A%E9%87%8D%E8%A6%81%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%A0%B9%E6%8D%AE%E8%BF%99%E4%B8%AA%E6%9D%A5%E5%88%A4%E6%96%AD%E4%B8%80%E6%9D%A1SQL%E7%9A%84%E5%A5%BD%E5%9D%8F%0A%20%20%20%20*%20system%0A%20%20%20%20%E8%A1%A8%E4%B8%AD%E5%8F%AA%E6%9C%89%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%9F%BA%E6%9C%AC%E4%B8%8A%E6%98%AF%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F%0A%20%20%20%20*%20const%0A%20%20%20%20%E8%A1%A8%E5%8F%AA%E6%9C%89%E4%B8%80%E8%A1%8C%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%B9%B6%E5%9C%A8%E6%9F%A5%E8%AF%A2%E5%BC%80%E5%A7%8B%E6%97%B6%E5%B0%B1%E8%A2%AB%E8%AF%BB%E5%8F%96%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%A2%AB%E4%BC%98%E5%8C%96%E5%99%A8%E8%A7%86%E4%B8%BA%E5%B8%B8%E6%95%B0%E3%80%82%E5%BD%93%E4%B8%BB%E9%94%AE%E6%88%96%E8%80%85%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E5%92%8C%E4%B8%80%E4%B8%AA%E5%B8%B8%E6%95%B0%E6%AF%94%E8%BE%83%E6%97%B6%E4%BC%9A%E5%87%BA%E7%8E%B0%0A%20%20%20%20*%20eq_ref%20%0A%20%20%20%20%E6%AF%8F%E6%AC%A1%E5%8C%B9%E9%85%8D%E6%97%B6%E5%8F%AA%E4%BC%9A%E8%AF%BB%E5%8F%96%E4%B8%80%E8%A1%8C%EF%BC%8C%E5%BD%93%E4%B8%BB%E9%94%AE%E6%88%96%E8%80%85%E5%94%AF%E4%B8%80%E9%9D%9E%E7%A9%BA%E7%B4%A2%E5%BC%95(unique%20not%20null%20index)%E7%9A%84%E5%85%A8%E9%83%A8%E6%88%96%E9%83%A8%E5%88%86%E8%A2%AB%E4%BD%BF%E7%94%A8%E6%97%B6%E4%BC%9A%E5%87%BA%E7%8E%B0%0A%20%20%20%20*%20ref%0A%20%20%20%20%E6%AF%8F%E6%AC%A1%E5%8C%B9%E9%85%8D%E6%97%B6%E4%BC%9A%E8%AF%BB%E5%8F%96%E6%89%80%E6%9C%89%E5%8C%B9%E9%85%8D%E8%A1%8C%EF%BC%8C%E5%BD%93%E7%94%A8%E5%88%B0%E4%BA%86%E9%9D%9E%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E6%88%96%E8%80%85%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E6%97%B6%E4%BC%9A%E5%87%BA%E7%8E%B0%EF%BC%8C%E7%AD%89%E5%80%BC%E5%8C%B9%E9%85%8D%0A%20%20%20%20*%20range%0A%20%20%20%20%E6%A0%B9%E6%8D%AE%E7%B4%A2%E5%BC%95%E9%80%89%E5%8F%96%E4%B8%80%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E7%9A%84%E8%A1%8C%EF%BC%8C%E8%8C%83%E5%9B%B4%E5%8C%B9%E9%85%8D%0A%20%20%20%20*%20index%0A%E4%BB%8E%E7%B4%A2%E5%BC%95%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E8%AE%BF%E9%97%AE%E5%8E%9F%E8%A1%A8%E3%80%82(%E5%AF%B9%E4%BA%8Einnodb%E5%BC%95%E6%93%8E%EF%BC%8C%E7%B4%A2%E5%BC%95%E4%B8%AD%E4%BC%9A%E6%9C%89%E4%B8%BB%E9%94%AE%E6%95%B0%E6%8D%AE)%E6%88%96%E8%80%85%E6%A0%B9%E6%8D%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E9%A1%BA%E5%BA%8F%E8%BF%9B%E8%A1%8C%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%0A%20%20%20%20*%20all%0A%20%20%20%20%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%0A**%5Bsystem%3E%3Eeq_ref%3Eref%3Erange%3Eindex%3Eall%5D%E8%B5%B7%E7%A0%81%E8%BE%BE%E5%88%B0range%E7%BA%A7%E5%88%AB%EF%BC%8C%E6%9C%80%E5%A5%BD%E8%83%BD%E8%BE%BE%E5%88%B0ref**%0A%0A*%20**possible_keys**%0A%E5%8F%AF%E8%83%BD%E7%94%A8%E5%88%B0%E7%9A%84%E7%B4%A2%E5%BC%95%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%88%96%E8%80%85%E5%A4%9A%E4%B8%AA%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E5%AD%97%E6%AE%B5%E5%8F%AA%E8%A6%81%E5%AD%98%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%B0%B1%E4%BC%9A%E8%A2%AB%E5%88%97%E5%87%BA%EF%BC%8C%E4%BD%86%E4%B8%8D%E4%B8%80%E5%AE%9A%E4%BC%9A%E8%A2%AB%E4%BD%BF%E7%94%A8%0A*%20**key**%0A%E5%AE%9E%E9%99%85%E4%BD%BF%E7%94%A8%E7%9A%84%E7%B4%A2%E5%BC%95%EF%BC%8C%E4%B8%8D%E4%B8%80%E5%AE%9A%E5%9C%A8possible_keys%E4%B8%AD%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AFnull%E5%88%99%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%0A*%20**key_len**%0A%E8%A1%A8%E7%A4%BA%E4%BD%BF%E7%94%A8%E7%9A%84%E7%B4%A2%E5%BC%95%E7%9A%84%E9%95%BF%E5%BA%A6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E5%88%A4%E6%96%AD%E5%A4%9A%E5%88%97%E7%B4%A2%E5%BC%95%E4%B8%AD%E7%9A%84%E5%93%AA%E4%BA%9B%E9%83%A8%E5%88%86%E8%A2%AB%E4%BD%BF%E7%94%A8%E5%88%B0%E4%BA%86%E3%80%82%E5%9C%A8%E4%B8%8D%E6%8D%9F%E5%A4%B1%E7%B2%BE%E7%A1%AE%E6%80%A7%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E8%B6%8A%E7%9F%AD%E8%B6%8A%E5%A5%BD%0A*%20**ref**%0A%E5%8C%B9%E9%85%8D%E6%97%B6%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E5%88%97%E6%88%96%E8%80%85%E5%B8%B8%E6%95%B0%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%80%BC%E6%98%AFfunc%EF%BC%8C%E8%A1%A8%E7%A4%BA%E5%8C%B9%E9%85%8D%E6%97%B6%E7%94%A8%E5%88%B0%E4%BA%86%E7%94%B1%E5%87%BD%E6%95%B0%E7%94%9F%E6%88%90%E7%9A%84%E5%80%BC(%2B-%E3%80%81*%2F%E4%B9%9F%E7%AE%97)%E3%80%82%E5%A6%82%E6%9E%9C%E8%A6%81%E7%9C%8B%E4%BD%BF%E7%94%A8%E5%88%B0%E4%BA%86%E5%93%AA%E4%BA%9B%E5%87%BD%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%9C%A8explain%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E5%90%8E%E4%BD%BF%E7%94%A8show%20warnings%0A*%20**rows**%0A%E6%A3%80%E6%9F%A5%E7%9A%84%E8%A1%8C%E6%95%B0%EF%BC%8CInnodb%E5%BC%95%E6%93%8E%E6%98%AF%E4%B8%AA%E4%BC%B0%E8%AE%A1%E5%80%BC%0A*%20**Extra**%0A%E5%8C%85%E5%90%AB%E4%B8%8D%E9%80%82%E5%90%88%E5%9C%A8%E5%85%B6%E5%AE%83%E5%88%97%E4%B8%AD%E6%98%BE%E7%A4%BA%E4%BD%86%E5%8D%81%E5%88%86%E9%87%8D%E8%A6%81%E7%9A%84%E4%BF%A1%E6%81%AF%0A%20%20%20%20*%20Using%20filesort%0A%20%20%20%20%E8%AF%B4%E6%98%8EMySQL%E4%BC%9A%E5%AF%B9%E6%95%B0%E6%8D%AE%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%A4%96%E9%83%A8%E7%9A%84%E7%B4%A2%E5%BC%95%E6%8E%92%E5%BA%8F%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E6%8C%89%E7%85%A7%E8%A1%A8%E5%86%85%E7%B4%A2%E5%BC%95%E7%9A%84%E9%A1%BA%E5%BA%8F%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%8F%96%E3%80%82%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4MySQL%E7%9A%84%E6%8E%92%E5%BA%8F%E6%B2%A1%E6%9C%89%E7%94%A8%E5%88%B0%E7%B4%A2%E5%BC%95%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%B0%BD%E9%87%8F%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%0A%20%20%20%20*%20Using%20temporary%0A%20%20%20%20%E4%BD%BF%E7%94%A8%E4%BA%86%E4%B8%B4%E6%97%B6%E8%A1%A8%E6%9D%A5%E4%BF%9D%E5%AD%98%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%B8%B8%E8%A7%81%E4%BA%8E%E5%88%86%E7%BB%84%E5%92%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E9%9D%9E%E5%B8%B8%E5%BD%B1%E5%93%8D%E6%80%A7%E8%83%BD%EF%BC%8C%E6%98%AF%E4%B8%80%E5%AE%9A%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%E7%9A%84%0A%20%20%20%20*%20Using%20index%0A%20%20%20%E8%A1%A8%E7%A4%BA%E4%BD%BF%E7%94%A8%E4%BA%86%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%EF%BC%8C%E9%81%BF%E5%85%8D%E8%AE%BF%E9%97%AE%E4%BA%86%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%8C%E3%80%82%E5%A6%82%E6%9E%9C%E5%90%8C%E6%97%B6%E5%87%BA%E7%8E%B0Using%20where%EF%BC%8C%E8%A1%A8%E6%98%8E%E7%B4%A2%E5%BC%95%E8%A2%AB%E7%94%A8%E6%9D%A5%E6%89%A7%E8%A1%8C%E7%B4%A2%E5%BC%95%E9%94%AE%E5%80%BC%E7%9A%84%E6%9F%A5%E6%89%BE%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%88%99%E8%A1%A8%E6%98%8E%E7%B4%A2%E5%BC%95%E7%94%A8%E6%9D%A5%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E8%80%8C%E9%9D%9E%E6%89%A7%E8%A1%8C%E6%9F%A5%E6%89%BE%E5%8A%A8%E4%BD%9C%0A%20%20%20*%20Using%20where%0A%20%20%20%E8%A1%A8%E6%98%8E%E4%BD%BF%E7%94%A8%E4%BA%86where%E8%BF%87%E6%BB%A4%0A%20%20%20*%20Using%20join%20buffer%0A%20%20%20%E8%A1%A8%E5%90%8D%E4%BD%BF%E7%94%A8%E4%BA%86%E8%BF%9E%E6%8E%A5%E7%BC%93%E5%AD%98%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94join%E7%89%B9%E5%88%AB%E5%A4%9A%E7%9A%84%E8%AF%9D%E9%9C%80%E8%A6%81%E6%8A%8A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84join%20buffer%E8%B0%83%E5%A4%A7%E4%B8%80%E7%82%B9%0A%20%20%20*%20impossible%20where%0A%20%20%20where%E5%AD%90%E5%8F%A5%E7%9A%84%E5%80%BC%E6%80%BB%E6%98%AFfalse%EF%BC%8C%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E4%BB%BB%E4%BD%95%E8%A1%8C%0A%20%20%20*%20select%20tables%20optimiezd%20away%0A%20%20%20%E5%9C%A8%E6%B2%A1%E6%9C%89order%20by%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%9F%BA%E4%BA%8E%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96min%2Fmax%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%88%96%E8%80%85%E5%AF%B9%E4%BA%8EMyISAM%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E4%BC%98%E5%8C%96count(%5C*)%EF%BC%8C%E4%B8%8D%E5%BF%85%E7%AD%89%E5%88%B0%E6%89%A7%E8%A1%8C%E9%98%B6%E6%AE%B5%E5%86%8D%E8%AE%A1%E7%AE%97%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E7%94%9F%E6%88%90%E9%98%B6%E6%AE%B5%E5%8D%B3%E5%AE%8C%E6%88%90%E4%BC%98%E5%8C%96%0A%20%20%20*%20distinct%0A%20%20%20%E4%BC%98%E5%8C%96distinct%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%9C%A8%E6%89%BE%E5%88%B0%E7%AC%AC%E4%B8%80%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%BB%84%E4%B9%8B%E5%90%8E%E7%AB%8B%E5%8D%B3%E5%81%9C%E6%AD%A2%E6%89%BE%E5%90%8C%E6%A0%B7%E7%9A%84%E5%80%BC%E7%9A%84%E6%93%8D%E4%BD%9C%0A%0A%23%23%23%23%20%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%0A%0A*%20**%E5%85%A8%E5%80%BC%E5%8C%B9%E9%85%8D**%0A%E5%8D%B3%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%9C%A8%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E4%B8%AD%E5%85%A8%E9%83%A8%E4%BD%BF%E7%94%A8%E5%88%B0%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%98%AF%E7%AD%89%E5%80%BC%EF%BC%8C%E8%BF%99%E6%98%AF%E6%9C%80%E7%90%86%E6%83%B3%E7%9A%84%E6%83%85%E5%86%B5%0A*%20**%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E6%B3%95%E5%88%99**%0A%E6%9C%89%E7%9A%84%E6%97%B6%E5%80%99%E6%88%91%E4%BB%AC%E7%94%A8%E4%B8%8D%E5%88%B0%E7%B4%A2%E5%BC%95%E7%9A%84%E6%89%80%E6%9C%89%E5%88%97%EF%BC%8C%E4%BD%86%E6%98%AF%E6%88%91%E4%BB%AC%E5%BF%85%E9%A1%BB%E8%A6%81%E9%81%B5%E5%BE%AA%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E6%B3%95%E5%88%99%EF%BC%9A%E6%9F%A5%E8%AF%A2%E4%BB%8E%E6%9C%80%E5%B7%A6%E5%89%8D%E5%88%97%E5%BC%80%E5%A7%8B%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%B8%8D%E8%B7%B3%E8%BF%87%E4%B8%AD%E9%97%B4%E5%88%97%EF%BC%8C%E4%BD%86%E6%98%AF%E5%A6%82%E6%9E%9C%E6%98%AF%E7%AD%89%E5%80%BC%E5%8C%B9%E9%85%8D%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8Cabcd%E5%92%8Cabdc%E7%94%9A%E8%87%B3dcba%E6%98%AF%E4%B8%80%E6%A0%B7%E7%9A%84%EF%BC%8C%E8%87%AA%E5%8A%A8%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E5%99%A8%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%B0%83%E6%95%B4%0A*%20**%E4%B8%8D%E5%86%8D%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5%E4%B8%8A%E5%81%9A%E4%BB%BB%E4%BD%95%E6%93%8D%E4%BD%9C**%0A%E5%87%BD%E6%95%B0%EF%BC%8C%E8%AE%A1%E7%AE%97%EF%BC%8C%E8%87%AA%E5%8A%A8%E6%88%96%E8%80%85%E6%89%8B%E5%8A%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E9%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E8%80%8C%E8%BD%AC%E5%90%91%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F%0A*%20**%E8%8C%83%E5%9B%B4%E6%9D%A1%E4%BB%B6%E5%8F%B3%E8%BE%B9%E7%9A%84%E5%88%97%E6%97%A0%E6%95%88**%0A%E7%B4%A2%E5%BC%95%E5%8F%AF%E4%BB%A5%E5%BD%A2%E8%B1%A1%E7%90%86%E8%A7%A3%E4%B8%BA%EF%BC%8C%E4%B8%80%E7%BA%A7%E4%B8%80%E7%BA%A7%E9%80%92%E5%A2%9E%E7%BC%A9%E5%B0%8F%E7%9A%84%E8%8C%83%E5%9B%B4%EF%BC%8C%E6%AF%94%E5%A6%82%E8%AF%B4A%E5%8C%BAB%E6%A0%8B3%E6%A5%BC302%E6%88%BF%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%91%E5%8F%AA%E8%AF%B4A%E5%8C%BAB%E6%A0%8B%EF%BC%8C%E9%82%A3%E4%B9%88%E6%89%BE%E5%88%B0B%E6%A0%8B%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%90%8E%E9%9D%A2%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E6%98%AF%E5%85%B7%E4%BD%93%E5%87%A0%E6%A5%BC%EF%BC%8C%E6%89%80%E4%BB%A5%E8%AF%B4%E8%8C%83%E5%9B%B4%E6%A3%80%E7%B4%A2%E5%90%8E%E9%9D%A2%E7%9A%84%E5%88%97%E7%B4%A2%E5%BC%95%E6%97%A0%E6%95%88%E3%80%82%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E4%BC%9A%E6%8A%8A%E8%8C%83%E5%9B%B4%E6%A3%80%E7%B4%A2%E6%94%BE%E5%9C%A8%E6%9C%80%E5%90%8E%E9%9D%A2%0A*%20**%E5%B0%BD%E9%87%8F%E4%BD%BF%E7%94%A8%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95**%0A%E5%8F%AA%E8%AE%BF%E9%97%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E6%9F%A5%E8%AF%A2(%E7%B4%A2%E5%BC%95%E5%88%97%E5%92%8C%E6%9F%A5%E8%AF%A2%E5%88%97%E4%B8%80%E8%87%B4)%EF%BC%8C%E5%87%8F%E5%B0%91select*%0A*%20**%E4%BD%BF%E7%94%A8!%3D%E6%88%96%E8%80%85%3C%3E%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E5%8F%98%E6%88%90%E5%85%A8%E8%A1%A8%E6%89%AB%E6%8F%8F**%0A*%20**%E4%BD%BF%E7%94%A8is%20null%20%EF%BC%8Cis%20not%20null%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88**%0A*%20**%E4%BD%BF%E7%94%A8like%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E6%97%B6%E5%80%99%E5%89%8D%E9%9D%A2%E9%80%9A%E9%85%8D%E7%AC%A6%E6%98%AF%25%E7%9A%84%E6%97%B6%E5%80%99(like('%25a'))MySQL%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88**%0A%E6%89%80%E4%BB%A5like%E5%90%8E%E9%9D%A2%E7%9A%84%E7%99%BE%E5%88%86%E5%8F%B7%E5%B0%BD%E9%87%8F%E4%B8%8D%E8%A6%81%E6%94%BE%E5%9C%A8%E5%B7%A6%E8%BE%B9%E3%80%82%E9%9D%9E%E8%A6%81%E6%94%BE%E5%B7%A6%E8%BE%B9%E7%9A%84%E8%AF%9D%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E6%9D%A5%E8%A7%A3%E5%86%B3%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98%EF%BC%8C%E4%BD%86%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5%E4%B8%8D%E5%8F%AF%E4%BB%A5%E8%B6%85%E8%BF%87%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AD%97%E6%AE%B5%0A*%20**%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8D%E5%8A%A0%E5%8D%95%E5%BC%95%E5%8F%B7%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88**%0A*%20**%E4%BD%BF%E7%94%A8or%E8%BF%9E%E6%8E%A5%E6%97%B6%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88**%0A%0A%23%23%23%20%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%0A1.%20%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E7%9A%84%E5%BC%80%E5%90%AF%E5%B9%B6%E6%8D%95%E8%8E%B7%E6%85%A2SQL%0A2.%20explain%E6%85%A2SQL%E5%88%86%E6%9E%90%0A3.%20show%20profile%E6%9F%A5%E8%AF%A2SQL%E5%9C%A8MySQL%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%87%8C%E9%9D%A2%E7%9A%84%E6%89%A7%E8%A1%8C%E7%BB%86%E8%8A%82%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%83%85%E5%86%B5%0A4.%20SQL%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98%0A%0A%23%23%23%23%23%20**%E5%B0%8F%E8%A1%A8%E9%A9%B1%E5%8A%A8%E5%A4%A7%E8%A1%A8**%0A**IN%E7%94%B1%E5%86%85%E8%80%8C%E5%A4%96%EF%BC%8CEXIST%E8%87%AA%E5%A4%96%E8%80%8C%E5%86%85**%0A%E6%88%91%E4%BB%AC%E5%9C%A8Java%E4%B8%AD%E5%86%99%E4%B8%A4%E4%B8%AA%E5%B5%8C%E5%A5%97%E7%9A%84%E5%BE%AA%E7%8E%AF%EF%BC%8C%E5%BE%AA%E7%8E%AF%E6%AC%A1%E6%95%B0%E6%98%AF%E4%B8%A4%E4%B8%AA%E5%BE%AA%E7%8E%AF%E7%9A%84%E4%B9%98%E7%A7%AF%EF%BC%8C%E6%89%80%E4%BB%A5%E5%86%85%E5%B1%82%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%A4%96%E5%B1%82%E5%BE%AA%E7%8E%AF%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%B2%A1%E6%9C%89%E5%85%B3%E7%B3%BB%E3%80%82%E4%BD%86%E6%98%AF%E5%9C%A8MySQL%E4%B8%AD%EF%BC%8C%E6%AF%8F%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%E5%BE%AA%E7%8E%AF%E5%B0%B1%E9%9C%80%E8%A6%81%E5%BB%BA%E7%AB%8B%E4%B8%80%E6%AC%A1%E8%BF%9E%E6%8E%A5%EF%BC%8C%E6%89%80%E4%BB%A5%E8%A6%81%E6%B1%82%E7%9A%84%E6%98%AF%E5%A4%96%E5%B1%82%E5%BE%AA%E7%8E%AF%E6%AC%A1%E6%95%B0%E8%A6%81%E6%AF%94%E5%86%85%E5%B1%82%E5%BE%AA%E7%8E%AF%E6%AC%A1%E6%95%B0%E8%A6%81%E5%B0%8F%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%88%91%E4%BB%AC%E5%B8%B8%E8%AF%B4%E7%9A%84%E5%B0%8F%E8%A1%A8%E9%A9%B1%E5%8A%A8%E5%A4%A7%E8%A1%A8%EF%BC%8C%E5%A4%A7%E8%A1%A8%E6%8C%87%E7%9A%84%E6%98%AF%E6%95%B0%E6%8D%AE%E5%A4%9A%E7%9A%84%E8%A1%A8%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%9B%B8%E5%BD%93%E4%BA%8E%E6%98%AF%E9%81%8D%E5%8E%86%E8%BF%99%E4%B8%AA%E8%A1%A8%EF%BC%8C%E6%95%B0%E6%8D%AE%E8%B6%8A%E5%A4%9A%E9%81%8D%E5%8E%86%E6%AC%A1%E6%95%B0%E8%B6%8A%E5%A4%9A%0A%60%60%60sql%0ASELECT%20*%20FROM%20A%20WHERE%20ID%20IN(SELECT%20ID%20FROM%20B)%3B%0A%60%60%60%0A%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%BC%9A%E5%85%88%E5%8E%BB%E6%9F%A5%E8%AF%A2B%E8%A1%A8%EF%BC%8C%E5%86%8D%E5%8E%BB%E6%9F%A5%E8%AF%A2A%E8%A1%A8%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E7%9B%B8%E5%BD%93%E4%BA%8E%E5%85%88%E9%81%8D%E5%8E%86B%E5%86%8D%E9%81%8D%E5%8E%86A%EF%BC%8C%E9%82%A3%E4%B9%88%E5%BD%93B%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%9D%E5%AF%B9%E5%B0%8F%E4%BA%8EA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%0A%60%60%60sql%0ASELECT%20*%20FROM%20A%20EXISTS(%20SELECT%20existsFlag%20FROM%20B%20WHERE%20A.ID%3DB.ID)%0A%60%60%60%0A%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%BC%9A%E5%85%88%E5%8E%BB%E6%9F%A5%E8%AF%A2A%E8%A1%A8%EF%BC%8C%E5%86%8D%E5%8E%BB%E6%9F%A5%E8%AF%A2B%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8E%E5%85%88%E9%81%8D%E5%8E%86A%E5%86%8D%E5%8E%BB%E9%81%8D%E5%8E%86B%EF%BC%8C%E5%BD%93A%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%9D%E5%AF%B9%E5%B0%8F%E4%BA%8EB%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%0A**exists**%E5%85%B3%E9%94%AE%E5%AD%97%E6%98%AF%E5%B0%86%E4%B8%BB%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%95%B0%E6%8D%AE%E6%94%BE%E5%9C%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%B8%AD%E8%BF%9B%E8%A1%8C%E9%AA%8C%E8%AF%81%EF%BC%8C%E6%A0%B9%E6%8D%AE%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%9C%E6%9D%A5%E5%86%B3%E5%AE%9A%E4%B8%BB%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%95%B0%E6%8D%AE%E6%98%AF%E5%90%A6%E4%BF%9D%E7%95%99%E3%80%82**exists%E5%8F%AA%E4%BC%9A%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AAboolean%E5%80%BC%E6%89%80%E4%BB%A5select%E5%90%8E%E9%9D%A2%E5%86%99%E4%BB%80%E4%B9%88%E6%B2%A1%E5%85%B3%E7%B3%BB**%0A%0A%23%23%23%23%23%20SQL%E6%8E%92%E5%BA%8F%0AMySQL%E6%94%AF%E6%8C%81%E4%B8%A4%E7%A7%8D%E6%8E%92%E5%BA%8F%E6%96%B9%E5%BC%8F**Filesort**%E5%92%8C**Index**%EF%BC%8CIndex%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%EF%BC%8C%E5%AE%83%E6%98%AF%E6%8C%87MySQL%E6%89%AB%E6%8F%8F%E7%B4%A2%E5%BC%95%E6%9C%AC%E8%BA%AB%E5%AE%8C%E6%88%90%E6%8E%92%E5%BA%8F%EF%BC%8CFilesort%E7%9A%84%E6%95%88%E7%8E%87%E4%BD%8EORDER%20BY%E5%B0%BD%E9%87%8F%E4%BD%BF%E7%94%A8Index%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8FileSort%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%88%97%E4%B8%8A%EF%BC%8CFileSort%E6%9C%89%E4%B8%A4%E7%A7%8D%E7%AE%97%E6%B3%95%EF%BC%8C**%E5%8F%8C%E8%B7%AF%E6%8E%92%E5%BA%8F**%E5%92%8C**%E5%8D%95%E8%B7%AF%E6%8E%92%E5%BA%8F**%0A%0A*%20**%E5%8F%8C%E8%B7%AF%E6%8E%92%E5%BA%8F**%0A%20%E4%B8%A4%E6%AC%A1%E6%89%AB%E6%8F%8F%EF%BC%8C%E5%BE%97%E5%88%B0%E6%9C%80%E7%BB%88%E6%95%B0%E6%8D%AE%E3%80%82%E4%BB%8E%E7%A3%81%E7%9B%98%E4%B8%AD%E8%AF%BB%E5%8F%96%E6%BB%A1%E8%B6%B3%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9A%84**%E8%A1%8C%E6%8C%87%E9%92%88(%E8%AE%B0%E5%BD%95%E7%9B%AE%E6%A0%87%E8%A1%8C%E5%9C%A8%E8%A1%A8%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE)%E5%92%8C%E9%9C%80%E8%A6%81%E6%8E%92%E5%BA%8F%E7%9A%84%E5%88%97**%EF%BC%8C%E5%AF%B9%E5%AE%83%E4%BB%AC%E5%9C%A8sort_buffer%E4%B8%AD%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%E4%B9%8B%E5%90%8E%E5%B0%86%E6%8E%92%E5%BA%8F%E7%BB%93%E6%9E%9C%E4%B8%A2%E7%BB%99%E9%9A%8F%E6%9C%BA%E8%AF%BB%E5%8F%96%E7%BC%93%E5%86%B2%E5%8C%BA(read_rnd_buffer)%EF%BC%8C%E9%9A%8F%E6%9C%BA%E8%AF%BB%E5%8F%96%E7%BC%93%E5%86%B2%E5%8C%BA%E6%A0%B9%E6%8D%AE%E6%8C%87%E9%92%88%E4%BF%A1%E6%81%AF%E5%86%8D%E5%88%B0%E7%A3%81%E7%9B%98%E4%B8%AD%E8%AF%BB%E5%8F%96%E8%AF%A5%E8%A1%8C%E7%9A%84%E5%85%B6%E4%BB%96%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE%0A*%20**%E5%8D%95%E8%B7%AF%E6%8E%92%E5%BA%8F**%0A%20%E4%B8%80%E6%AC%A1%E6%89%AB%E6%8F%8F%EF%BC%8C%E5%BE%97%E5%88%B0%E6%9C%80%E7%BB%88%E6%95%B0%E6%8D%AE%E3%80%82%E4%BB%8E%E7%A3%81%E7%9B%98%E4%B8%AD%E8%AF%BB%E5%8F%96%E6%BB%A1%E8%B6%B3%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E8%A1%8C%E7%9A%84%E6%89%80%E6%9C%89%E7%9A%84%E5%88%97%EF%BC%8C%E6%8C%89%E7%85%A7Order%20By%E5%9C%A8buffer%E4%B8%AD%E5%AF%B9%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8C%E7%84%B6%E5%90%8E%E6%89%AB%E6%8F%8F%E6%8E%92%E5%BA%8F%E5%90%8E%E7%9A%84%E5%88%97%E8%A1%A8%E8%BF%9B%E8%A1%8C%E8%BE%93%E5%87%BA%E3%80%82%E5%8D%95%E8%B7%AF%E6%8E%92%E5%BA%8F%E7%9A%84%E6%95%88%E7%8E%87%E6%9B%B4%E9%AB%98%EF%BC%8C%E9%81%BF%E5%85%8D%E4%BA%86%E7%AC%AC%E4%BA%8C%E6%AC%A1%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%87%8F%E5%B0%91%E4%BA%86IO%E6%AC%A1%E6%95%B0%EF%BC%8C%E9%99%8D%E4%BD%8E%E4%BA%86%E7%A3%81%E7%9B%98%E7%9A%84%E5%BC%80%E9%94%80%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BC%9A%E4%BD%BF%E7%94%A8%E6%9B%B4%E5%A4%9A%E7%9A%84%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%8A%8A%E6%89%80%E6%9C%89%E7%9A%84%E5%AD%97%E6%AE%B5%E9%83%BD%E4%BF%9D%E5%AD%98%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E4%BA%86%0A%20%0A%20%E4%BD%86%E6%98%AF%E5%9B%A0%E4%B8%BA%E5%8D%95%E8%B7%AF%E6%8E%92%E5%BA%8F%E9%9C%80%E8%A6%81%E6%9B%B4%E5%A4%A7%E7%9A%84%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%A6%82%E6%9E%9Csort_buffer_size%E7%9A%84%E5%A4%A7%E5%B0%8F%E4%B8%8D%E8%B6%B3%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E4%B8%A4%E6%AC%A1%E7%94%9A%E8%87%B3%E6%9B%B4%E5%A4%9A%E6%AC%A1%E7%9A%84IO%E6%AC%A1%E6%95%B0%0A%20**%E4%BD%BF%E7%94%A8%E5%8D%95%E8%B7%AF%E6%8E%92%E5%BA%8F%E7%9A%84%E6%9D%A1%E4%BB%B6**%0A*%20%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%89%80%E5%8F%96%E5%87%BA%E7%9A%84%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E5%A4%A7%E5%B0%8F%E6%80%BB%E5%92%8C%E8%A6%81%E5%B0%8F%E4%BA%8Emax_length_for_sort_data%0A*%20%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E4%B8%AD%E4%B8%8D%E5%8C%85%E5%90%ABtext%E5%92%8Cblob%E7%B1%BB%E5%9E%8B%0A%20%0A%E5%BD%93%E6%88%91%E4%BB%AC%E5%8F%AA%E8%83%BD%E4%BD%BF%E7%94%A8FileSort%E7%9A%84%E6%97%B6%E5%80%99%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%A2%9E%E5%A4%A7**sort_buffer**%E5%92%8C%E5%A2%9E%E5%A4%A7**max_length_for_sort_data**%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%B1%9E%E6%80%A7%E6%9D%A5%E6%8F%90%E9%AB%98SQL%E6%95%88%E7%8E%87**max_length_for_sort_data**%E6%98%AF%E6%8C%87%E6%9F%A5%E8%AF%A2%E5%88%97%E4%B8%AD%E9%99%A4%E5%8E%BB**text**%E5%92%8C**blob**%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%85%B6%E4%BB%96%E5%AD%97%E6%AE%B5%E5%A4%A7%E5%B0%8F%E7%9A%84%E5%92%8C%EF%BC%8C%E6%89%80%E4%BB%A5%E6%88%91%E4%BB%AC%E5%BD%93%E4%BD%BF%E7%94%A8%E4%BA%86%E6%8E%92%E5%BA%8F%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%B0%BD%E9%87%8F%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8SELECT%20%5C*%EF%BC%8C%E5%8F%AA%E6%9F%A5%E8%AF%A2%E9%9C%80%E8%A6%81%E7%94%A8%E5%88%B0%E7%9A%84%E5%AD%97%E6%AE%B5%0A**%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E5%B0%BD%E9%87%8F%E4%BD%BF%E7%94%A8Index%E6%8E%92%E5%BA%8F**%0A*%20**%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E5%92%8C%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AD%97%E6%AE%B5%E4%B8%80%E8%87%B4**%0A*%20**%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E9%81%B5%E5%BE%AA%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99**%0A%E4%BD%BF%E7%94%A8WHERE%E8%AF%AD%E5%8F%A5%E5%92%8CORDER%20BY%E8%AF%AD%E5%8F%A5%E6%BB%A1%E8%B6%B3%E7%B4%A2%E5%BC%95%E6%9C%80%E5%B7%A6%E5%89%8D%E5%88%97%EF%BC%9A%E5%A6%82%E6%9E%9CWHERE%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%BA%86%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5%E4%BD%9C%E4%B8%BA%E7%AD%89%E5%80%BC%E6%9D%A1%E4%BB%B6%EF%BC%8C%E9%82%A3%E4%B9%88WHERE%E5%92%8CORDER%20BY%E8%BF%9E%E8%B5%B7%E6%9D%A5%E7%9C%8B%E6%BB%A1%E8%B6%B3%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99%E4%B9%9F%E6%98%AF%E5%8F%AF%E4%BB%A5%E7%9A%84%0A*%20**%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%E8%A6%81%E4%B9%88%E9%83%BD%E5%8D%87%E5%BA%8F%E8%A6%81%E4%B9%88%E9%83%BD%E9%99%8D%E5%BA%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%80%E5%8D%87%E4%B8%80%E9%99%8D%E4%BC%9A%E4%BA%A7%E7%94%9FFileSort**%0A*%20**%E6%8E%92%E5%BA%8F%E4%B8%AD%E6%9C%89%E4%B8%8D%E6%98%AF%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%97%E4%BC%9A%E4%BD%BF%E7%94%A8FileSort**%0A%0AGROUP%20BY%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E5%85%88%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%90%8E%E5%88%86%E7%BB%84%EF%BC%8C%E6%89%80%E4%BB%A5%E9%81%B5%E5%BE%AA%E5%92%8CORDER%20BY%E4%B8%80%E6%A0%B7%E7%9A%84%E5%8E%9F%E5%88%99%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%B8%80%E7%82%B9%EF%BC%8C%E5%BD%93%E5%8F%AF%E4%BB%A5%E5%9C%A8WHERE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%9A%84%E9%99%90%E5%AE%9A%E6%9D%A1%E4%BB%B6%EF%BC%8C%E4%B8%8D%E8%A6%81%E5%86%99%E5%9C%A8HAVING%E4%B8%AD%0A%23%23%23%23%20%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%0AMySQL%E7%9A%84%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%98%AFMySQL%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%80%E7%A7%8D%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%85%B3%E9%97%AD%EF%BC%8C%E7%94%A8%E6%9D%A5%E8%AE%B0%E5%BD%95MySQL%E4%B8%AD%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%E8%B6%85%E8%BF%87%E9%98%88%E5%80%BC%E7%9A%84%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%85%B7%E4%BD%93%E6%97%B6%E9%97%B4%E8%B6%85%E8%BF%87long_query_time%E5%88%99%E8%A2%AB%E8%AE%B0%E5%BD%95%E5%88%B0%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E4%B8%AD%EF%BC%8Clong_query_time%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC%E6%98%AF10%EF%BC%8C%E6%84%8F%E6%80%9D%E6%98%AF%E8%BF%90%E8%A1%8C10%E7%A7%92%E4%BB%A5%E4%B8%8A%E7%9A%84%E8%AF%AD%E5%8F%A5%0A%60%60%60sql%0A%23%E6%9F%A5%E8%AF%A2%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%0ASHOW%20VARIABLES%20LIKE%20'%25slow_query_log%25'%0A%23%E5%BC%80%E5%90%AF%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%EF%BC%8C%E5%8F%AA%E5%AF%B9%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%94%9F%E6%95%88%EF%BC%8C%E9%87%8D%E5%90%AF%E5%90%8E%E5%A4%B1%E6%95%88%EF%BC%8C%E6%83%B3%E8%A6%81%E6%B0%B8%E4%B9%85%E5%BC%80%E5%90%AF%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6(my.cnf)%0ASET%20GLOBAL%20slow_query_log%3D1%0A%23%E4%B8%BA%E6%85%A2%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E5%92%8C%E6%96%87%E4%BB%B6%E5%90%8D%0ASET%20GLOBAL%20slow_query_log_file%3D'C%3A%5CProgramData%5CMySQL%5CMySQL%20Server%205.5%5CData%5Cslow20190901.log'%0A%60%60%60%0A%7C%20Variable_name%20%7CValue%20%7C%20%0A%7C%20---%20%7C%20---%20%7C%0A%7Cslow_query_log%20%7C%20OFF%20%7C%20%0A%7Cslow_query_log_file%7C%20C%3A%5CProgramData%5CMySQL%5CMySQL%20Server%205.5%5CData%5CZJZL-0190630XJ-slow.log%20%7C%20%20%0A%E7%B3%BB%E7%BB%9F%E4%BC%9A%E7%BB%99%E4%B8%80%E4%B8%AA%E9%BB%98%E8%AE%A4%E7%9A%84host_name_slow.log%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87**slow_query_log_file**%E6%9D%A5%E8%AE%BE%E7%BD%AE%0A%0A%60%60%60sql%0A%23%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E9%98%88%E5%80%BC%EF%BC%8C%E5%A4%9A%E5%B0%91%E7%A7%92%E4%BC%9A%E8%A2%AB%E8%AE%B0%E5%BD%95%E5%88%B0%E6%85%A2%E6%97%A5%E5%BF%97%E4%B8%AD%E3%80%82%0A%23%E5%88%A4%E6%96%AD%E9%80%BB%E8%BE%91%E6%98%AF%E5%A4%A7%E4%BA%8E%EF%BC%8C%E5%88%9A%E5%A5%BD%E7%AD%89%E4%BA%8E%E9%98%88%E5%80%BC%E4%B8%8D%E4%BC%9A%E8%AE%B0%E5%BD%95%E5%88%B0%E6%85%A2%E6%97%A5%E5%BF%97%E4%B8%AD%0ASHOW%20VARIABLES%20LIKE%20'%25long_query_time%25'%0A%23%E4%BF%AE%E6%94%B9%E6%85%A2SQL%E9%98%88%E5%80%BC%0ASET%20GLOBAL%20long_query_time%3D3%0A%60%60%60%0A%7C%20Variable_name%20%7CValue%20%7C%20%0A%7C%20---%20%7C%20---%20%7C%0A%7Clong_query_time%20%7C%2010.000000%20%7C%20%0A%60%60%60sql%0A%23%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%9C%89%E5%A4%9A%E5%B0%91%E6%9D%A1%E6%85%A2SQL%0ASHOW%20GLOBAL%20STATUS%20LIKE%20'%25slow_queries%25'%0A%60%60%60%0A%23%23%23%23%20mysqldumpslow%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7%0Amysqldumpslow--help%E6%9F%A5%E7%9C%8B%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF%0A*%20-s%0A%E6%98%AF%E6%8C%89%E7%85%A7%E4%BD%95%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%90%8E%E9%9D%A2%E8%B7%9Fctrl%0Ac%EF%BC%9A%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0%0At%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%97%B6%E9%97%B4%0Ar%EF%BC%9A%E8%BF%94%E5%9B%9E%E8%AE%B0%E5%BD%95%0Al%EF%BC%9A%E9%94%81%E5%AE%9A%E6%97%B6%E9%97%B4%0Aal%EF%BC%9A%E5%B9%B3%E5%9D%87%E9%94%81%E5%AE%9A%E6%97%B6%E9%97%B4%0Aar%EF%BC%9A%E5%B9%B3%E5%9D%87%E8%BF%94%E5%9B%9E%E8%AE%B0%E5%BD%95%E6%95%B0%0Aat%EF%BC%9A%E5%B9%B3%E5%9D%87%E8%BF%94%E5%9B%9E%E6%9F%A5%E8%AF%A2%E6%97%B6%E9%97%B4%0A*%20-t%0A%E5%90%8E%E9%9D%A2%E8%B7%9F%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%EF%BC%8C%E8%A1%A8%E7%A4%BA%E8%BF%94%E5%9B%9E%E5%89%8D%E5%A4%9A%E5%B0%91%E6%9D%A1%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%0A*%20-g%0A%E5%90%8E%E9%9D%A2%E6%8E%A5%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%60%60%60linux%0A%E5%BE%97%E5%88%B0%E8%BF%94%E5%9B%9E%E8%AE%B0%E5%BD%95%E6%95%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%89%8D%E5%8D%81%E6%9D%A1SQL%0Amysqldumpslow%20-s%20r%20-t%2010%2F%E6%85%A2%E6%97%A5%E5%BF%97%E8%B7%AF%E5%BE%84%0A%E5%BE%97%E5%88%B0%E6%8C%89%E6%97%B6%E9%97%B4%E6%8E%92%E5%BA%8F%E6%9C%80%E9%95%BF%E7%9A%84%E4%B8%94%E6%9C%89%E5%B7%A6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%89%8D%E5%8D%81%E6%9D%A1%E6%95%B0%E6%8D%AE%0Amysqldumpslow%20-s%20t%20-t%2010%20-g%22left%20join%22%2F%E6%85%A2%E6%97%A5%E5%BF%97%E8%B7%AF%E5%BE%84%0A%60%60%60%0A%0A%0A%23%23%23%23%20Show%20Profile%0A%0A%E6%98%AFMySQL%E6%8F%90%E4%BE%9B%E7%9A%84%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E5%88%86%E6%9E%90%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D%E4%B8%AD%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E7%9A%84%E8%B5%84%E6%BA%90%E6%B6%88%E8%80%97%E6%83%85%E5%86%B5%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%85%B3%E9%97%AD%EF%BC%8C%E5%B9%B6%E4%BF%9D%E5%AD%98%E6%9C%80%E8%BF%9115%E6%AC%A1%E7%9A%84%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C%0A%0A%0A%60%60%60SQL%0A%23%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AFshow%20profile%0ASHOW%20VARIABLES%20LIKE'%25profiling%25'%0A%23%E5%BC%80%E5%90%AFshow%20profile%0ASET%20GLOBAL%20profiling%3D1%0A%23%E4%BD%BF%E7%94%A8show%20profiles%0ASHOW%20profiles%0A%60%60%60%0A%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%AF%8F%E4%B8%80%E6%9D%A1%E8%A2%AB%E8%AE%B0%E5%BD%95%E7%9A%84SQL%E7%9A%84%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%0A%7C%20QUERY_ID%20%7CDuration%20%20%7CQuery%20%20%7C%20%0A%7C%20---%20%7C%20---%20%7C%20---%20%7C%20%0A%7C1%20%20%7C%200.00190025%20%7C%20show%20variables%20like'%25profiling%25'%20%7C%0A%0A%E9%80%9A%E8%BF%87%E4%B8%8B%E9%9D%A2%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%9C%A8%E5%AD%97%E6%AE%B5QUERY%E5%90%8E%E9%9D%A2%E5%86%99%E4%B8%8A%E5%AF%B9%E5%BA%94%E7%9A%84QUERY%20ID%E5%8F%AF%E4%BB%A5%E5%BE%97%E5%88%B0%E5%85%B7%E4%BD%93%E7%9A%84%E6%AF%8F%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E7%9A%84%E6%97%B6%E9%97%B4%20%0A%0A**show%20profile%E4%B8%BB%E8%A6%81%E5%8F%82%E6%95%B0**%0A*%20ALL%0A%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E5%BC%80%E9%94%80%E4%BF%A1%E6%81%AF%0A*%20**BLOCK%20IO**%0A%E6%98%BE%E7%A4%BA%E5%9D%97IO%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%0A*%20CONTEXT%20SWITCHES%0A%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%0A*%20**CPU**%0A%E6%98%BE%E7%A4%BACPU%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%E4%BF%A1%E6%81%AF%0A*%20IPC%0A%E6%98%BE%E7%A4%BA%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%E4%BF%A1%E6%81%AF%0A*%20**MEMORY**%0A%E6%98%BE%E7%A4%BA%E5%86%85%E5%AD%98%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%E4%BF%A1%E6%81%AF%0A*%20PAGE%20FAULTS%0A%E6%98%BE%E7%A4%BA%E9%A1%B5%E7%A0%81%E9%94%99%E8%AF%AF%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%E4%BF%A1%E6%81%AF%0A*%20SOURCE%20%0A%E6%98%BE%E7%A4%BASource_function%EF%BC%8CSource_file%EF%BC%8CSource_line%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%E4%BF%A1%E6%81%AF%0A*%20SWAPS%0A%E6%98%BE%E7%A4%BA%E4%BA%A4%E6%8D%A2%E6%AC%A1%E6%95%B0%E7%9B%B8%E5%85%B3%E5%BC%80%E9%94%80%E7%9A%84%E4%BF%A1%E6%81%AF%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%60%60%60sql%0ASHOW%20PROFILE%20CPU%2CBLOCK%20IO%20FOR%20QUERY%201%0A%60%60%60%0A%0A%E4%B8%BB%E8%A6%81%E5%85%B3%E6%B3%A8%E4%B8%8B%E9%9D%A2%E8%BF%99%E4%BA%9B%E5%8F%82%E6%95%B0%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%8C%E5%87%BA%E7%8E%B0%E4%BB%BB%E6%84%8F%E4%B8%80%E4%B8%AA%E9%83%BD%E6%98%AF%E5%BF%85%E9%A1%BB%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96%E7%9A%84%0A*%20Converting%20HEAP%20to%20MyISAM%0A%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E5%A4%AA%E5%A4%A7%EF%BC%8C%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%EF%BC%8C%E9%9C%80%E8%A6%81%E6%8A%8A%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%90%AC%E8%BF%90%E5%88%B0%E7%A3%81%E7%9B%98%E4%B8%AD%0A*%20**Creating%20temp%20table**%20%0A%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E8%A1%A8%EF%BC%9A%E6%8A%8A%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E5%88%B0%E4%B8%B4%E6%97%B6%E8%A1%A8%E4%B8%AD%EF%BC%8C%E7%94%A8%E5%AE%8C%E5%86%8D%E5%88%A0%E9%99%A4%E4%B8%B4%E6%97%B6%E8%A1%A8%0A*%20**Copy%20to%20temp%20table%20on%20disk**%0A%E6%8A%8A%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E5%88%B0%E7%A3%81%E7%9B%98%E4%B8%AD%EF%BC%8C%E9%9D%9E%E5%B8%B8%E5%8D%B1%E9%99%A9%E7%9A%84%E6%83%85%E5%86%B5%0A*%20Locked%0A%E5%8A%A0%E9%94%81%20%0A%0A%0A%23%23%23%23%20%E5%85%A8%E5%B1%80%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%0A%0A%E5%8F%AF%E4%BB%A5%E8%AE%B0%E5%BD%95%E6%89%80%E6%9C%89%E7%9A%84SQL%E8%AF%AD%E5%8F%A5%EF%BC%8C%E5%B9%B6%E5%AD%98%E5%82%A8%E5%9C%A8%E7%B3%BB%E7%BB%9F%E8%A1%A8%E4%B8%AD%EF%BC%8C%E6%B0%B8%E8%BF%9C%E4%B8%8D%E8%A6%81%E5%86%8D%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%BC%80%E5%90%AF%E8%BF%99%E4%B8%AA%E5%8A%9F%E8%83%BD%0A%60%60%60sql%0A%23%E5%BC%80%E5%90%AF%E5%85%A8%E5%B1%80%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%0ASET%20GLOBAL%20general_log%20%3D1%0A%23%E4%BB%A5%E8%A1%A8%E7%9A%84%E5%BD%A2%E5%BC%8F%0ASET%20GLOBAL%20log_output%3D'TABLE'%0A%23%E6%9F%A5%E7%9C%8B%E5%85%A8%E5%B1%80%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%0ASELECT%20*%20FROM%20mysql.general_log%0A%60%60%60%0A%0A%23%23%23%20MySQL%E9%94%81%E6%9C%BA%E5%88%B6%0A%0A%0A%23%23%23%23%20%E9%94%81%E7%9A%84%E5%88%86%E7%B1%BB%0A**%E5%AF%B9%E6%95%B0%E6%8D%AE%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B1%BB%E5%9E%8B%E5%88%92%E5%88%86**%0A*%20%E8%AF%BB%E9%94%81%0A%E9%92%88%E5%AF%B9%E5%90%8C%E4%B8%80%E4%BB%BD%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%A4%9A%E4%B8%AA%E8%AF%BB%E6%93%8D%E4%BD%9C%E5%8F%AF%E4%BB%A5%E5%90%8C%E6%97%B6%E8%BF%9B%E8%A1%8C%E8%80%8C%E4%B8%8D%E4%BC%9A%E4%BA%92%E7%9B%B8%E5%BD%B1%E5%93%8D%0A*%20%E5%86%99%E9%94%81%0A%E5%BD%93%E5%89%8D%E5%86%99%E6%93%8D%E4%BD%9C%E6%B2%A1%E6%9C%89%E5%AE%8C%E6%88%90%E5%89%8D%EF%BC%8C%E4%BC%9A%E9%98%BB%E6%96%AD%E5%85%B6%E4%BB%96%E7%9A%84%E5%86%99%E9%94%81%E5%92%8C%E8%AF%BB%E9%94%81%0A%0A**%E5%AF%B9%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E7%9A%84%E7%B2%92%E5%BA%A6%E5%88%92%E5%88%86**%0A*%20%E8%A1%8C%E9%94%81%0A*%20%E8%A1%A8%E9%94%81%0A%0A%23%23%23%23%23%20%E8%A1%A8%E9%94%81%0A%E5%81%8F%E5%90%91MyISAM%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%8C%E5%BC%80%E9%94%80%E5%B0%8F%EF%BC%8C%E5%8A%A0%E9%94%81%E5%BF%AB%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%AD%BB%E9%94%81%EF%BC%8C%E4%BD%86%E6%98%AF%E9%94%81%E7%9A%84%E7%B2%92%E5%BA%A6%E5%A4%A7%EF%BC%8C%E5%8F%91%E7%94%9F%E9%94%81%E5%86%B2%E7%AA%81%E7%9A%84%E6%A6%82%E7%8E%87%E9%AB%98%EF%BC%8C%E5%B9%B6%E5%8F%91%E5%BA%A6%E5%BE%88%E4%BD%8E%0A%60%60%60sql%0A%23%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0%E8%A1%A8%E9%94%81(%E8%AF%BB%E9%94%81%7C%E5%86%99%E9%94%81)%0ALOCK%20TABLE%20%20%20%5BtableName%20%5BREAD%7CWRITE%5D%5D%20%2C%20%5B%20%5D%20%2C%20%5B%20%5D%E2%80%A6%E2%80%A6%0A%23%E6%9F%A5%E7%9C%8B%E8%A1%A8%E4%B8%8A%E5%8A%A0%E8%BF%87%E7%9A%84%E9%94%81%0ASHOW%20OPEN%20TABLES%0A%23%E9%87%8A%E6%94%BE%E8%A1%A8%E9%94%81%0AUNLOCK%20TABLES%0A%60%60%60%0A%0A**%E8%A1%A8%E8%AF%BB%E9%94%81**%0A%E5%8A%A0%E9%94%81session%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A1%A8%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%86%99(%E6%8A%A5%E9%94%99)%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%86%99%E5%85%B6%E4%BB%96%E8%A1%A8(%E6%8A%A5%E9%94%99)%EF%BC%8C**%E5%8F%AA%E8%AF%BB%E4%B8%8D%E5%8F%AF%E5%86%99**%0A%E5%85%B6%E4%BB%96session%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A1%A8%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%86%99(%E9%98%BB%E5%A1%9E)%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%86%99%E5%85%B6%E4%BB%96%E6%9C%AA%E5%8A%A0%E9%94%81%E8%A1%A8%EF%BC%8C**%E5%8F%AF%E8%AF%BB%E5%86%99%E9%98%BB%E5%A1%9E**%0A**%E8%A1%A8%E5%86%99%E9%94%81**%0A%E5%8A%A0%E9%94%81session%20%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%8A%A0%E9%94%81%E8%A1%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%86%99%E5%8A%A0%E9%94%81%E8%A1%A8%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%86%99%E5%85%B6%E4%BB%96%E8%A1%A8%EF%BC%8C**%E5%8F%AF%E8%AF%BB%E5%8F%AF%E5%86%99**%0A%E5%85%B6%E4%BB%96session%20%E4%B8%8D%E5%8F%AF%E4%BB%A5%E8%AF%BB(%E9%98%BB%E5%A1%9E)%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%86%99%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%86%99%E5%85%B6%E4%BB%96%E8%A1%A8%EF%BC%8C**%E8%AF%BB%E9%98%BB%E5%A1%9E%E4%B8%8D%E5%8F%AF%E5%86%99**%0A%0A*%20**%E5%8A%A0%E9%94%81session%E5%8F%AA%E5%8F%AF%E4%BB%A5%E5%A4%84%E7%90%86%E8%87%AA%E5%B7%B1%E5%8A%A0%E9%94%81%E7%9A%84%E8%A1%A8**%0A*%20**%E8%AF%BB%E9%94%81%E9%98%BB%E5%A1%9E%E5%85%B6%E4%BB%96session%E7%9A%84%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%8A%A0%E9%94%81session%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%86%99**%0A*%20**%E5%86%99%E9%94%81%E9%98%BB%E5%A1%9E%E5%85%B6%E4%BB%96session%E7%9A%84%E6%89%80%E6%9C%89%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%8A%A0%E9%94%81session%E5%8F%AF%E8%AF%BB%E5%8F%AF%E5%86%99**%0A%23%23%23%23%23%20%E8%A1%8C%E9%94%81%0A%E5%81%8F%E5%90%91InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%8C%E5%BC%80%E9%94%80%E5%A4%A7%EF%BC%8C%E5%8A%A0%E9%94%81%E6%85%A2%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%AD%BB%E9%94%81%EF%BC%8C%E4%BD%86%E6%98%AF%E9%94%81%E7%9A%84%E7%B2%92%E5%BA%A6%E6%9C%80%E5%B0%8F%EF%BC%8C%E5%8F%91%E7%94%9F%E9%94%81%E5%86%B2%E7%AA%81%E7%9A%84%E6%A6%82%E7%8E%87%E6%9C%80%E5%B0%8F%EF%BC%8C%E5%B9%B6%E5%8F%91%E5%BA%A6%E6%9C%80%E9%AB%98%0A%0AInnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E9%BB%98%E8%AE%A4%E7%9A%84%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%EF%BC%8C%E8%BF%99%E7%A7%8D%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8B%E7%9A%84%E8%A1%8C%E9%94%81%E6%9C%89%E4%BB%A5%E4%B8%8B%E7%89%B9%E7%82%B9%0A*%20%E5%8A%A0%E9%94%81session%E5%8F%AF%E4%BB%A5%E5%86%99%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%AF%BB**%E6%9C%80%E6%96%B0%E7%9A%84%E3%80%81%E6%9C%AA%E6%8F%90%E4%BA%A4**%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%AF%BB%E5%B7%B1%E4%B9%8B%E6%89%80%E5%86%99%0A*%20%E5%85%B6%E4%BB%96session%E8%AF%BB%E4%B8%8D%E5%88%B0%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%B9%B6%E4%B8%94%E9%98%BB%E5%A1%9E%E5%AF%B9%E5%90%8C%E4%B8%80%E8%A1%8C%E7%9A%84%E5%86%99%E6%93%8D%E4%BD%9C%0A%0A%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E4%BC%9A%E5%AF%BC%E8%87%B4%E8%A1%8C%E9%94%81%E5%8D%87%E7%BA%A7%E4%B8%BA%E8%A1%A8%E9%94%81%0A**%E9%97%B4%E9%9A%99%E9%94%81**%0A%E5%BD%93%E6%88%91%E4%BB%AC%E7%94%A8%E8%8C%83%E5%9B%B4%E6%9D%A1%E4%BB%B6%E8%80%8C%E4%B8%8D%E6%98%AF%E7%AD%89%E5%80%BC%E6%9D%A1%E4%BB%B6%E6%9D%A5%E7%BB%99%E6%95%B0%E6%8D%AE%E5%8A%A0%E9%94%81%E6%97%B6%EF%BC%8CInnoDB%E4%BC%9A%E7%BB%99%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%B7%B2%E6%9C%89%E6%95%B0%E6%8D%AE%E8%AE%B0%E5%BD%95%E7%9A%84%E7%B4%A2%E5%BC%95%E9%A1%B9%E5%8A%A0%E9%94%81%EF%BC%8C%E5%AF%B9%E4%BA%8E%E9%94%AE%E5%80%BC%E5%9C%A8%E6%9D%A1%E4%BB%B6%E8%8C%83%E5%9B%B4%E5%86%85%E4%BD%86%E6%98%AF%E5%B9%B6%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A2%AB%E7%A7%B0%E4%B8%BA%E9%97%B4%E9%9A%99%E3%80%82InnoDB%E4%B9%9F%E4%BC%9A%E5%AF%B9%E8%BF%99%E4%B8%AA%E9%97%B4%E9%9A%99%E5%8A%A0%E9%94%81%EF%BC%8C%E8%BF%99%E7%A7%8D%E9%94%81%E6%9C%BA%E5%88%B6%E5%B0%B1%E5%8F%AB%E9%97%B4%E9%9A%99%E9%94%81%E3%80%82%0A%E9%97%B4%E9%9A%99%E9%94%81%E4%BC%9A%E5%AF%BC%E8%87%B4%E8%8C%83%E5%9B%B4%E5%86%85%EF%BC%8C%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E9%94%AE%E5%80%BC%E4%B9%9F%E8%A2%AB%E9%94%81%E5%AE%9A%EF%BC%8C%E6%89%80%E4%BB%A5%E5%9C%A8%E9%94%81%E5%AE%9A%E5%90%8E%E6%97%A0%E6%B3%95%E6%8F%92%E5%85%A5%E9%94%AE%E5%80%BC%E8%8C%83%E5%9B%B4%E5%86%85%E7%9A%84%E4%BB%BB%E4%BD%95%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%9F%90%E4%BA%9B%E6%83%85%E5%86%B5%E4%BC%9A%E5%BD%B1%E5%93%8D%E6%80%A7%E8%83%BD%0A%0A**%E5%A6%82%E4%BD%95%E9%94%81%E5%AE%9A%E4%B8%80%E8%A1%8C**%0A%E4%BD%BF%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97FOR%20UPDATE%EF%BC%8C%E7%9B%B4%E5%88%B0%E6%8F%90%E4%BA%A4%E6%89%8D%E4%BC%9A%E9%87%8A%E6%94%BE%E9%94%81%0A%60%60%60sql%0ASELECT%20*%20FROM%20tableName%20WHERE%20id%3D1%20FOR%20UPDATE%0A%60%60%60%0A%0A%0A%0A%23%23%23%20%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%0Aslave%E4%BC%9A%E4%BB%8Emaster%E8%AF%BB%E5%8F%96binlog%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%EF%BC%8Cmaster%E5%B0%86%E6%94%B9%E5%8F%98%E8%AE%B0%E5%BD%95%E5%88%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E8%BF%99%E4%BA%9B%E8%AE%B0%E5%BD%95%E8%BF%87%E7%A8%8B%E5%8F%AB%E5%81%9A%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97%E4%BA%8B%E4%BB%B6%EF%BC%8Cslave%E5%B0%86maser%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%AE%83%E7%9A%84%E4%B8%AD%E7%BB%A7%E6%97%A5%E5%BF%97%E4%B8%AD%EF%BC%8Cslave%E9%87%8D%E5%81%9A%E4%B8%AD%E7%BB%A7%E6%97%A5%E5%BF%97%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%B0%86%E6%94%B9%E5%8F%98%E5%BA%94%E7%94%A8%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E3%80%82MySQL%E7%9A%84%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%98%AF%EF%BC%8C%E5%BC%82%E6%AD%A5%E4%B8%94%E4%B8%B2%E8%A1%8C%E5%8C%96%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BC%9A%E6%9C%89%E5%BB%B6%E8%BF%9F%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82**%E6%B3%A8%E6%84%8F%EF%BC%9A**%0A*%20%E6%AF%8F%E4%B8%AAslave%E5%8F%AA%E8%83%BD%E6%9C%89%E4%B8%80%E4%B8%AAmaster%0A*%20%E4%B8%80%E4%B8%AAmaster%E5%8F%AF%E4%BB%A5%E6%9C%89%E5%A4%9A%E4%B8%AAslave%0A*%20%E6%AF%8F%E4%B8%AAslave%E5%8F%AA%E8%83%BD%E6%9C%89%E4%B8%80%E4%B8%AA%E5%94%AF%E4%B8%80%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8ID%0A%0A%0A%0A%0A%23%23%23%23%20%E4%B8%BB%E6%9C%BA%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6my.ini%0A*%20**server-id**%20%20%20**%E5%BF%85%E9%A1%BB**%0A%E8%BF%99%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%94%AF%E4%B8%80ID%0A*%20**log-bin**%20**%E5%BF%85%E9%A1%BB**%0A%E5%90%AF%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97%20%0A%E6%9C%AC%E5%9C%B0%E8%B7%AF%E5%BE%84%2Fmysqlbin%0A*%20**log-err**%20**%E5%8F%AF%E9%80%89**%0A%E5%90%AF%E7%94%A8%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%0A%E6%9C%AC%E5%9C%B0%E8%B7%AF%E5%BE%84%E3%80%81mysqlerr%0A*%20**binlog-ignore-db**%20**%E5%8F%AF%E9%80%89**%0A%E8%AE%BE%E7%BD%AE%E4%B8%8D%E9%9C%80%E8%A6%81%E5%A4%8D%E5%88%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%0A%E5%90%8E%E9%9D%A2%E5%86%99%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%90%8D%E5%AD%97%0A*%20**binlog-do-db**%20**%E5%8F%AF%E9%80%89**%0A%E8%AE%BE%E7%BD%AE%E9%9C%80%E8%A6%81%E5%A4%8D%E5%88%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%0A%0A**%E4%BB%8E%E6%9C%BA%E5%8F%AA%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8ID%E5%8D%B3%E5%8F%AF**%0A%0A%23%23%23%23%20%E5%9C%A8%E4%B8%BB%E6%9C%BA%E4%B8%8A%E5%BB%BA%E7%AB%8B%E8%B4%A6%E6%88%B7%E5%B9%B6%E6%8E%88%E6%9D%83%E7%BB%99%E4%BB%8E%E6%9C%BA%0A*%20CRANT%20REPLICATION%20SLAVE%20ON%20%5C*.%5C*%20'userName'%20%40%20'%E4%B8%BB%E6%9C%BAIP'%20IDENTIFIED%20BY%20'passWord'%0A%E6%8A%8AuserName%EF%BC%8CpassWord%E6%9B%BF%E6%8D%A2%E6%88%90%E6%83%B3%E8%A6%81%E5%BB%BA%E7%AB%8B%E7%9A%84%E8%B4%A6%E6%88%B7%EF%BC%8C%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%9D%A5%E6%89%A7%E8%A1%8C%0A*%20flush%20privileges%0A%E5%88%B7%E6%96%B0%0A*%20show%20master%20status%0A%E8%AE%B0%E5%BD%95File%E5%92%8CPostion%E7%9A%84%E5%80%BC%EF%BC%8C%E8%AE%B0%E5%BD%95%E8%A6%81%E5%A4%8D%E5%88%B6%E5%93%AA%E4%B8%80%E4%B8%AA%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E5%92%8C%E8%A6%81%E5%BC%80%E5%A7%8B%E5%A4%8D%E5%88%B6%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%8C%E6%B3%A8%E6%84%8F%EF%BC%8C%E8%BF%99%E6%97%B6%E5%80%99%E4%B8%8D%E8%A6%81%E6%93%8D%E4%BD%9C%E4%B8%BB%E6%9C%BA%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%80%BC%E4%BC%9A%E5%8F%98%E5%8C%96%0A%20*%20%E5%9C%A8%E4%BB%8E%E6%9C%BA%E4%B8%8A%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E9%85%8D%E7%BD%AE%0ACHANGE%20MASTER%20TO%20MASTER_HOST%3D'%E4%B8%BB%E6%9C%BAIP'%2CMASTER_USER%3D'userName'%2CMASTER_PASSWORD%3D'passWord'%2CMASTER_LOG_FILE%3D''%2CMASTER_LOG_POS%3D%0A*%20STARE%20SLAVE%0A%E5%90%AF%E5%8A%A8%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%9C%8D%E5%8A%A1%0A%0A%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E5%90%8E%E4%BD%BF%E7%94%A8**SHOW%20SLAVE%20STATUS**%E5%91%BD%E4%BB%A4%EF%BC%8C%E5%A6%82%E6%9E%9C**SLAVE_IO_RUNNING**%E5%92%8C%0A**SLAVE_SQL_RUNNING**%E5%90%8C%E4%B8%BAYES%E5%88%99%E8%A1%A8%E7%A4%BA%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F</center></span>
</div></body></html> 